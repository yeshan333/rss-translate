<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/"><channel><title>Grafana Labs 上的 Grafana Labs 博客</title><link>https://grafana.com/blog/</link><description>Grafana Labs 上的 Grafana Labs 博客中的最​​新内容</description><lastBuildDate>Tue, 09 Apr 2024 16:03:59 GMT</lastBuildDate><generator>rfeed v1.1.1</generator><docs>https://github.com/svpino/rfeed/blob/master/README.md</docs><item><title>使用探索日志查找日志数据：无需 LogQL！</title><link>https://grafana.com/blog/2024/04/09/find-your-logs-data-with-explore-logs-no-logql-required/</link><description>&lt;p&gt;我们很高兴地宣布推出 Explore Logs 预览版，这是一种无需编写 LogQL 即可浏览日志的新方法。在这篇文章中，我们将介绍为什么构建探索日志，并将更深入地研究它的一些功能，包括按标签、检测到的字段进行一目了然的细分，以及我们的新模式检测。最后，我们将告诉您今天如何亲自尝试探索日志。&lt;/p&gt;&lt;p&gt;但让我们从头开始——使用古老的 LogQL。&lt;/p&gt;&lt;h2 id="we-love-logql"&gt;我们喜欢 LogQL&lt;/h2&gt;&lt;p&gt; Grafana Loki 是 Grafana Labs 的&lt;a href="https://github.com/grafana/loki" rel="noopener noreferrer" target="_blank"&gt;开源日志聚合项目&lt;/a&gt;，提供了一种名为&lt;a href="https://grafana.com/blog/2022/05/12/10-things-you-didnt-know-about-logql/"&gt;LogQL&lt;/a&gt;的强大查询语言。站点可靠性工程师 (SRE) 和其他 Loki 专家喜欢使用它来过滤日志中的特定关键字、通过选择特定标签来减少噪音，以及执行其他操作以获得理解其系统的答案。&lt;/p&gt;&lt;p&gt;可以根据日志创建指标，并将其放入仪表板中以可视化关键见解。可以设置警报并将其连接到&lt;a href="https://grafana.com/products/cloud/irm/"&gt;Grafana 事件响应和管理&lt;/a&gt;(IRM)，其中包括&lt;a href="https://grafana.com/products/cloud/oncall/"&gt;Grafana OnCall&lt;/a&gt;和&lt;a href="https://grafana.com/products/cloud/incident/"&gt;Grafana Incident，&lt;/a&gt;因此您可以确保在出现问题时收到早期警告。&lt;/p&gt;&lt;p&gt;这些相同的查询可用于支持&lt;a href="https://grafana.com/docs/grafana/latest/panels-visualizations/visualizations/"&gt;Grafana 仪表板可视化&lt;/a&gt;，以便您可以了解日志。 LogQL真的很强大！只有一个问题……&lt;/p&gt;&lt;h2 id="but-i-dont-know-logql"&gt; “但我不知道 LogQL！”&lt;/h2&gt;&lt;p&gt;如果您不是每天都深入研究日志，您可能就没有理由学习 LogQL。也许你会时不时地投入其中，或者只是在某个事件期间。即使在这些时刻，必须记住查询语言的细节也会减慢响应时间。&lt;/p&gt;&lt;p&gt;关键是，您来到日志平台​​不是因为您喜欢日志，而是因为您&lt;em&gt;需要&lt;/em&gt;日志来完成您的工作。无论您需要它们来确保部署顺利进行、调查延迟问题还是处理凌晨 4 点的页面，您最不想做的就是与另一种查询语言进行斗争。&lt;/p&gt;&lt;p&gt;如果您能够利用 Loki + Grafana 提供的所有巨大优势，而无需学习 LogQL 就好了。好吧，您猜对了：现在您可以了！&lt;/p&gt;&lt;h2 id="introducing-explore-logs-a-new-oss-application"&gt;推出 Explore Logs，一个新的 OSS 应用程序&lt;/h2&gt;&lt;p&gt;Explore Logs 是我们新的 OSS 应用程序，可让您浏览日志，就像它们已经提前为您整齐地组织好了一样。您可以&lt;a href="https://github.com/grafana/explore-logs" rel="noopener noreferrer" target="_blank"&gt;在 GitHub 上找到源代码&lt;/a&gt;，但在您前往那里尝试之前，请允许我们向您快速浏览一下。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/explore-logs.gif"&gt;&lt;img alt="显示如何在 Grafana 中使用探索日志的 GIF" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示如何在 Grafana 中使用探索日志的 GIF" src="https://grafana.com/media/blog/explore-logs/explore-logs.gif" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;当您进入探索日志（在导航中，前往&lt;strong&gt;探索&lt;/strong&gt;&amp;gt;&lt;strong&gt;日志&lt;/strong&gt;）时，您将看到检测到的服务或应用程序的列表。工程师不再需要与整个组织的团队争夺一项约定的标准化。相反，我们拥抱混乱。&lt;/p&gt;&lt;p&gt;服务与其日志量以及最近日志行的预览一起显示，因此您可以一目了然地看到哪些服务最活跃以及它们发出的日志类型。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/recent-log-lines.png"&gt;&lt;img alt="服务日志量和最近日志行的预览" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="服务日志量和最近日志行的预览" src="https://grafana.com/media/blog/explore-logs/recent-log-lines.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;没有看到您正在寻找的服务？只需使用搜索栏搜索即可（纯文本搜索，而不是 LogQL）。&lt;/p&gt;&lt;p&gt;好像自动服务检测还不够，当您选择服务时，事情就开始变得非常有趣。&lt;/p&gt;&lt;h2 id="how-to-breakdown-logs-in-a-service"&gt;如何分解服务中的日志&lt;/h2&gt;&lt;p&gt;Explore Logs 提供了通过标签、检测到的字段和模式进一步可视化和细分服务日志的工具，同时确保日志行本身始终只需单击即可。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;标签&lt;/strong&gt;是可以附加到日志行的键值对，例如： &lt;code&gt;level=error&lt;/code&gt; 、 &lt;code&gt;environment=prod&lt;/code&gt; 、 &lt;code&gt;app=nginx&lt;/code&gt; 、 &lt;code&gt;team=loki&lt;/code&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;检测到的字段&lt;/strong&gt;包含在查询时从日志行自动提取的结构化键值对。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;模式&lt;/strong&gt;是从日志流自动派生的模板，用于匹配相同类型的行。这里的新创新带来了下述一些强大的功能。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;让我们依次探索（明白了吗？）其中的每一个，并看看探索日志如何使使用这些功能变得比以往更容易。&lt;/p&gt;&lt;h3 id="labels"&gt;标签&lt;/h3&gt;&lt;p&gt;在 Loki 中，&lt;a href="https://grafana.com/docs/loki/latest/get-started/labels/"&gt;标签&lt;/a&gt;是用于组织和识别日志流的键值对。为日志流附加标签，帮助用户高效查询、过滤、聚合日志。它们类似于其他日志系统中的标签或元数据。&lt;/p&gt;&lt;p&gt;探索日志为每个标签创建一个日志量图表，使您可以轻松查看哪些标签最活跃。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/labels.png"&gt;&lt;img alt="Loki 中每个标签的日志量图表" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Loki 中每个标签的日志量图表" src="https://grafana.com/media/blog/explore-logs/labels.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;选择标签会显示每个值的日志细分。例如，日志级别分为调试、信息、警告、错误和严重。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/logs-per-value.png"&gt;&lt;img alt="Loki 中的每值日志面板" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Loki 中的每值日志面板" src="https://grafana.com/media/blog/explore-logs/logs-per-value.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;选择一个值即可应用过滤器（通过在后台为您编写 LogQL）并立即跳转到显示相关日志行的精选视图。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/curated-view.png"&gt;&lt;img alt="日志行的精选视图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="日志行的精选视图" src="https://grafana.com/media/blog/explore-logs/curated-view.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="detected-fields"&gt;检测字段&lt;/h3&gt;&lt;p&gt;Loki 中检测到的字段是指在摄取日志消息时自动从日志消息中提取的字段。 Loki 不会对日志行的内容建立索引，但它可以在查询时从日志中解析和提取字段。此功能允许用户使用这些字段更有效地查询日志，而无需将每个可能的属性标记为标签，这可能成本高昂且效率低下。&lt;/p&gt;&lt;p&gt;探索日志在处理检测到的元数据时提供无缝体验。所选字段会自动分解为网格视图，您可以从那里过滤日志。&lt;/p&gt;&lt;p&gt;对于最终用户来说，在处理标签和检测到的字段时，机制的工作原理几乎相同，从而减少了必须记住哪个是哪个（以及与每个标签相关联的查询语法）的认知开销。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/explore-logs/detected-fields.png"&gt;&lt;img alt="Loki 中检测到的现场面板" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Loki 中检测到的现场面板" src="https://grafana.com/media/blog/explore-logs/detected-fields.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="pattern-matching"&gt;模式匹配&lt;/h3&gt;&lt;p&gt;Loki 提取日志模式，这有助于您了解服务生成的不同类型的日志行。模式提取发生在过滤之后。为了获得最佳结果，我们建议您首先按已知值（例如标签、检测到的字段和时间范围）进行过滤，以缩小搜索空间并使模式更有用。&lt;/p&gt;&lt;p&gt;您可以使用模式匹配来：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;了解系统生成的日志行类型&lt;/li&gt;&lt;li&gt;隐藏嘈杂或不相关的行以快速缩小重要范围&lt;/li&gt;&lt;li&gt;通过过滤与一种或多种模式匹配的日志行来关注特定趋势或异常&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;探索日志可让您轻松地将多个模式添加到过滤器，其中将包括与任何选定模式匹配的日志行。您还可以排除某种模式来隐藏此类日志行。&lt;/p&gt;&lt;h4 id="example-use-case-for-pattern-matching"&gt;模式匹配的示例用例&lt;/h4&gt;&lt;p&gt;假设您正在大量 HTTP 流量日志中查找错误。找出您正在寻找的单独线路可能很困难。使用模式，您可以通过单击按钮排除该类型的行来简单地静音有问题的行。&lt;/p&gt;&lt;p&gt;考虑下面的示例日志行。您可以清楚地看到两种不同的模式：&lt;/p&gt;&lt;div class="code-snippet code-snippet__mini"&gt;&lt;div class="lang-toolbar__mini"&gt; &lt;span class="code-clipboard"&gt;&lt;button&gt;&lt;img alt="将代码复制到剪贴板" class="code-clipboard__icon" height="13" src="https://grafana.com/media/images/icons/icon-copy-small-2.svg" width="14" /&gt;&lt;span&gt;复制&lt;/span&gt;&lt;/button&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="code-snippet code-snippet__border"&gt;&lt;pre&gt;&lt;code class="language-none"&gt;code=200 method=get path=/page1 trace_id=123 code=500 method=post path=/page2 trace_id=124 err: code=500 msg=”db connection error” trace_id=124 code=201 method=post path=/page2 trace_id=125 code=200 method=get path=/page1 trace_id=126 code=500 method=post path=/page2 trace_id=127 err: code=500 msg=”db connection error” trace_id=127 code=200 method=get path=/page2 trace_id=128 code=200 method=get path=/page2 trace_id=129 code=500 method=post path=/page2 trace_id=130 err: code=500 msg=”db connection error” trace_id=130&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;第一个模式描述了 HTTP 请求：&lt;/p&gt;&lt;div class="code-snippet code-snippet__mini"&gt;&lt;div class="lang-toolbar__mini"&gt; &lt;span class="code-clipboard"&gt;&lt;button&gt;&lt;img alt="将代码复制到剪贴板" class="code-clipboard__icon" height="13" src="https://grafana.com/media/images/icons/icon-copy-small-2.svg" width="14" /&gt;&lt;span&gt;复制&lt;/span&gt;&lt;/button&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="code-snippet code-snippet__border"&gt;&lt;pre&gt;&lt;code class="language-none"&gt;code=&amp;lt;_&amp;gt; method=&amp;lt;_&amp;gt; path=/&amp;lt;_&amp;gt; trace_id=&amp;lt;_&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;第二个模式描述了错误行：&lt;/p&gt;&lt;div class="code-snippet code-snippet__mini"&gt;&lt;div class="lang-toolbar__mini"&gt; &lt;span class="code-clipboard"&gt;&lt;button&gt;&lt;img alt="将代码复制到剪贴板" class="code-clipboard__icon" height="13" src="https://grafana.com/media/images/icons/icon-copy-small-2.svg" width="14" /&gt;&lt;span&gt;复制&lt;/span&gt;&lt;/button&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class="code-snippet code-snippet__border"&gt;&lt;pre&gt;&lt;code class="language-none"&gt;err: code=&amp;lt;_&amp;gt; msg=”&amp;lt;_&amp;gt;” trace_id=&amp;lt;_&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;p&gt;这些值被剥离，只留下组成模板或模式的字符串常量和 LogQL 占位符。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;你可知道？&lt;/strong&gt;在&lt;a href="https://github.com/grafana/loki" rel="noopener noreferrer" target="_blank"&gt;Loki 3.0&lt;/a&gt;中，您可以使用&lt;a href="https://grafana.com/docs/loki/latest/query/#pattern-match-filter-operators"&gt;模式过滤器&lt;/a&gt;代替 RegExp 以加快查询时间。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id="what-else-can-you-do-with-explore-logs"&gt;您还可以使用探索日志做什么？&lt;/h2&gt;&lt;p&gt;除了我们已经介绍的所有内容之外，还有一些其他值得注意的探索日志功能值得一提：&lt;/p&gt;&lt;h3 id="search"&gt;搜索&lt;/h3&gt;&lt;p&gt;也许 LogQL 很难，但文本搜索却不难。当您将搜索范围缩小到足够大时，对呈现的日志行进行区分大小写的纯文本搜索会派上用场。&lt;/p&gt;&lt;h3 id="copy-url"&gt;复制网址&lt;/h3&gt;&lt;p&gt;轻松与团队成员共享您当前的探索日志上下文，以帮助在团队环境中进行故障排除。&lt;/p&gt;&lt;h3 id="open-in-explore"&gt;在探索中打开&lt;/h3&gt;&lt;p&gt;Explore 中是否有您真正喜欢的功能，但 Explore Logs 中尚不存在？此时 LogQL 对您真的有帮助吗？轻松跳转到&lt;a href="https://grafana.com/docs/grafana/latest/explore/"&gt;Explore&lt;/a&gt; （我们的 UI，用于对数百个数据源（包括 Loki）进行数据探索），同时保留您当前的上下文。&lt;/p&gt;&lt;h2 id="how-explore-logs-works"&gt;探索日志的工作原理&lt;/h2&gt;&lt;p&gt;我们可能会同意这看起来真的很酷，而且这是一种与探索完全不同的体验。但是，它如何真正帮助开发人员呢？&lt;/p&gt;&lt;p&gt;那么，更快地解决可观测性问题听起来怎么样？更快地关闭 P1，更快地知道要推送哪些修补程序到产品，更快地回到床上。让我们向您展示如何操作。&lt;/p&gt;&lt;p&gt;假设您需要识别一项服务中行为不当的 pod。您当然可以使用 LogQL 和 Explore 来获取该信息 — 构造一个 LogQL 指标查询，按服务计算错误数，然后查看弹出的是哪一个。但这是&lt;em&gt;最简单的&lt;/em&gt;方法吗？&lt;/p&gt;&lt;p&gt;不再！现在你可以：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;首先选择您的服务&lt;/li&gt;&lt;li&gt;选择&lt;code&gt;level&lt;/code&gt;标签选择器，然后将&lt;code&gt;level=error&lt;/code&gt;添加到您的过滤条件&lt;/li&gt;&lt;li&gt;选择&lt;code&gt;pod&lt;/code&gt;标签选择器，然后查看所有受影响的 Pod 及其错误率&lt;/li&gt;&lt;li&gt;只需再单击一下，即可查看与这些 Pod 关联的日志行&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;只需几次点击，每一步都有视觉提示，并且再次有感觉，&lt;em&gt;无需编写 LogQL&lt;/em&gt; 。&lt;/p&gt;&lt;h2 id="special-thanks"&gt;特别感谢&lt;/h2&gt;&lt;p&gt;探索日志是共同同理心、创造力和辛勤工作的结果。我们要感谢迄今为止探索日志的所有贡献者：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href="https://github.com/cyriltovena" rel="noopener noreferrer" target="_blank"&gt;西里尔托韦纳&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/gtk-grafana" rel="noopener noreferrer" target="_blank"&gt;gtk-grafana&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/ivanahuckova" rel="noopener noreferrer" target="_blank"&gt;伊万纳胡科娃&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/L2D2grafana" rel="noopener noreferrer" target="_blank"&gt;L2D2格拉法纳&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/matryer" rel="noopener noreferrer" target="_blank"&gt;马特里耶&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/matyax" rel="noopener noreferrer" target="_blank"&gt;马蒂亚克斯&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/sandeepsukhani" rel="noopener noreferrer" target="_blank"&gt;桑迪普苏卡尼&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/shantanualsi" rel="noopener noreferrer" target="_blank"&gt;尚塔努阿西&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/svennergr" rel="noopener noreferrer" target="_blank"&gt;斯文纳格&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/trevorwhitney" rel="noopener noreferrer" target="_blank"&gt;特雷弗·惠特尼&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://github.com/zizzpudding" rel="noopener noreferrer" target="_blank"&gt;兹兹布丁&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="try-it-for-yourself"&gt;亲自尝试一下！&lt;/h2&gt;&lt;p&gt;探索日志现已可供预览。您可以在&lt;a href="https://github.com/grafana/explore-logs" rel="noopener noreferrer" target="_blank"&gt;探索日志 GitHub 存储库&lt;/a&gt;中了解更多信息。您还可以通过从存储库安装并将 Explore Logs 与&lt;a href="https://grafana.com/blog/2024/04/09/grafana-11-release-all-the-new-features/"&gt;Grafana 11&lt;/a&gt;和&lt;a href="https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/"&gt;Loki 3.0&lt;/a&gt;结合使用来尝试，这两个版本均已&lt;a href="https://grafana.com/blog/2024/04/09/grafanacon-2024-a-guide-to-all-the-announcements-from-grafana-labs/"&gt;在 GrafanaCON 2024 上发布&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;或者，您也可以在&lt;a href="https://play.grafana.org/a/grafana-lokiexplore-app/explore?mode=start&amp;amp;patterns=&amp;amp;var-patterns=&amp;amp;logId=&amp;amp;var-filters=" rel="noopener noreferrer" target="_blank"&gt;Grafana Play 环境&lt;/a&gt;中试用 Explore Logs。&lt;/p&gt;&lt;p&gt;请通过探索日志中的&lt;strong&gt;“提供反馈”&lt;/strong&gt;按钮告诉我们您希望看到哪些改进或添加内容，或者您​​可以更深入地参与存储库本身！&lt;/p&gt;&lt;p&gt;我们很高兴与我们的社区合作，共同打造最简单的 Loki + Grafana 体验！&lt;/p&gt;&lt;p&gt;&lt;em&gt;了解我们的开源日志聚合工具&lt;a href="https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features"&gt;Loki 3.0 的最新功能&lt;/a&gt;。&lt;/em&gt;&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 11:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/find-your-logs-data-with-explore-logs-no-logql-required/</guid></item><item><title>Grafana 11 版本：最新的可视化、场景驱动的仪表板、简单的访问控制等</title><link>https://grafana.com/blog/2024/04/09/grafana-11-release-all-the-new-features/</link><description>&lt;p&gt;在&lt;a href="https://grafana.com/blog/2024/04/09/grafanacon-2024-a-guide-to-all-the-announcements-from-grafana-labs/"&gt;GrafanaCON 2024 的开幕主题演讲&lt;/a&gt;中，阿姆斯特丹的与会者抢先了解了 Grafana 11 的一些最新功能，该功能现已提供预览版。&lt;/p&gt;&lt;div class="btn-row "&gt; &lt;a class="btn btn--primary " href="https://grafana.com/grafana/download/11.0.0-preview/?pg=blog&amp;amp;plcmt=body-txt-btn" rel="noopener noreferrer"&gt;Grafana：立即下载！&lt;/a&gt;&lt;/div&gt;&lt;p&gt;对于那些无法获得门票已售完的活动的人，请不要担心 - 我们汇总了可视化的所有最新更新，使您可以比以往更轻松地在 Grafana 中创建漂亮的仪表板。我们还引入了新的创新，以帮助简化运行、管理和大规模利用 Grafana 的强大功能。&lt;/p&gt;&lt;figure class="figure-wrapper w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/grafana/download/11.0.0-preview/?pg=blog&amp;amp;plcmt=body-txt"&gt;&lt;img alt="显示 Grafana 11 的 Grafana 徽标的图形" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示 Grafana 11 的 Grafana 徽标的图形" src="https://grafana.com/media/blog/grafana-11-release/grafana-11-meta.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;您可以立即通过&lt;a href="https://grafana.com/docs/grafana/latest/installation/upgrading/?pg=blog&amp;amp;plcmt=body-txt"&gt;升级实例&lt;/a&gt;或&lt;a href="https://grafana.com/grafana/download/?pg=blog&amp;amp;plcmt=body-txt"&gt;下载 Grafana 11 预览版来&lt;/a&gt;探索所有新功能。 Grafana 的最新版本是预览版，因此您可以开始测试和使用更新，但我们不建议在生产中部署它们。我们将在 5 月 14 日之前进行内部测试，届时 Grafana 11 将全面可用。&lt;/p&gt;&lt;p&gt;等不及要开始了吗？注册 Grafana Cloud，这是我们完全托管的可观察性平台，其中包括所有这些 Grafana 功能以及更多功能。我们为每个用例提供慷慨的免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;立即获取您的免费帐户！&lt;/a&gt;&lt;/p&gt;&lt;h2 id="easier-to-monitor-and-troubleshoot-your-data"&gt;更轻松地监控数据并排除故障&lt;/h2&gt;&lt;p&gt;无论您是监控太空中的火箭，还是&lt;a href="https://grafana.com/blog/2024/04/01/how-to-monitor-your-kids-chores-an-introduction-to-grafana-powered-parenting/"&gt;您的孩子打扫房间的频率&lt;/a&gt;（两者都同样困难），您都拥有比以往更多的选择来探索、可视化数据并发出警报，无论数据位于何处。&lt;/p&gt;&lt;h3 id="explore-prometheus-metrics-without-writing-queries"&gt;无需编写查询即可探索 Prometheus 指标&lt;/h3&gt;&lt;p&gt;我们知道，有时我们的用户编写 PromQL 很困难。如果您&lt;em&gt;无需&lt;/em&gt;编写 PromQL 就可以在 Prometheus 中进行查询和故障排除，会怎样？向 Explore Metrics 打个招呼，这是一种新的无查询体验，用于在 Grafana 11 中探索和钻取 Prometheus 指标。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;通过探索指标，您可以查找或选择指标名称并立即看到相应的可视化效果，无论您的指标是仪表、计数器还是直方图。您可以查看按每个标签细分的指标，这使得您可以轻松地按命名空间、集群或任何其他属性发现异常情况。这是缩小延迟、错误或其他问题根源的有效方法，而且完全只需点击即可。&lt;/p&gt;&lt;p&gt;要了解更多信息，请阅读我们的&lt;a href="https://grafana.com/docs/grafana/latest/explore/explore-metrics/?pg=blog&amp;amp;plcmt=body-txt"&gt;探索指标文档&lt;/a&gt;。&lt;/p&gt;&lt;h3 id="custom-visualizations-with-canvas-panel"&gt;使用 Canvas 面板进行自定义可视化&lt;/h3&gt;&lt;p&gt;自从我们在 Grafana 9.x 中引入 Canvas 面板以来，它的受欢迎程度和功能都在不断增长。除了引入&lt;a href="https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v10-3/#canvas-visualization-supports-pan-and-zoom"&gt;平移和缩放&lt;/a&gt;以及&lt;a href="https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v10-2/?pg=blog&amp;amp;plcmt=body-txt#create-interactive-buttons-in-canvas-visualizations"&gt;添加交互式按钮的&lt;/a&gt;功能之外，我们很高兴为 Canvas 面板引入以下增强功能。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;流程图功能：&lt;/strong&gt;社区对这些改进的需求很高，其中包括添加：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;广泛使用的元素：云、平行四边形和三角形。&lt;/li&gt;&lt;li&gt;中点控制使连接器不再必须是直线。&lt;/li&gt;&lt;li&gt;更多连接器样式，包括虚线以及角半径和方向控制。&lt;/li&gt;&lt;li&gt;连接器的水平和垂直卡扣。&lt;/li&gt;&lt;li&gt;元素的圆角样式。&lt;/li&gt;&lt;li&gt;旋转画布中的元素的能力。&lt;/li&gt;&lt;/ul&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;通用数据链接支持：&lt;/strong&gt;我们更新了数据链接，以便您可以将它们添加到与“画布”面板中的数据关联的几乎所有元素或元素属性。以前，您只能将数据链接添加到文本元素或使用&lt;code&gt;TextConfig&lt;/code&gt;对象的元素。此更新消除了该限制。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;无限平移：&lt;/strong&gt;使用这个新的编辑器选项，您现在可以查看和导航非常大的画布。当启用&lt;strong&gt;平移和变焦&lt;/strong&gt;开关时，会显示此选项。要进行此尝试，您必须启用&lt;code&gt;canvasPanelPanZoom&lt;/code&gt;功能切换。&lt;/p&gt;&lt;p&gt;要了解有关所有这些功能的更多信息，请查看我们的&lt;a href="https://grafana.com/docs/grafana-cloud/visualizations/panels-visualizations/visualizations/canvas/?pg=blog&amp;amp;plcmt=body-txt"&gt;Canvas 面板文档&lt;/a&gt;。&lt;/p&gt;&lt;h3 id="color-code-table-rows"&gt;颜色代码表行&lt;/h3&gt;&lt;p&gt;Grafana 11 添加了使用表格可视化中的彩色背景单元格类型向整个表格行添加颜色的功能。当您将表中的字段配置为使用此单元格类型时，可以使用将单元格颜色应用于整行的选项。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;此功能对于各种用例都很有用，包括将状态字段映射到颜色（例如， &lt;code&gt;info&lt;/code&gt; 、 &lt;code&gt;debug&lt;/code&gt; 、 &lt;code&gt;warning&lt;/code&gt; ）以及允许根据阈值对行进行颜色编码。这是我们使表格格式化更加无缝的方法之一，并使您能够使用表格可视化快速扫描数据。&lt;/p&gt;&lt;p&gt;要了解更多信息，请参阅&lt;a href="https://grafana.com/docs/grafana/v11.0/panels-visualizations/visualizations/table/?pg=blog&amp;amp;plcmt=body-txt#color-background-gradient-or-solid"&gt;表可视化文档&lt;/a&gt;。&lt;/p&gt;&lt;h3 id="faster-ai-powered-titles-and-descriptions"&gt;更快的人工智能驱动的标题和描述&lt;/h3&gt;&lt;p&gt;不再想知道如何在一个标题中汇总您打包到仪表板中的所有数据。 Grafana 11 可以帮助解决这一问题，这要归功于一种新的人工智能工具，它可以自动总结面板和仪表板中的信息，并为仪表板创建详细的标题和描述。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;要尝试此功能，您需要启用并配置&lt;a href="https://grafana.com/docs/grafana-cloud/alerting-and-irm/machine-learning/configure/llm-plugin/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana 的 LLM 应用程序插件&lt;/a&gt;。启用后，请在面板和仪表板中的&lt;strong&gt;“标题”&lt;/strong&gt;和&lt;strong&gt;“说明”&lt;/strong&gt;字段旁边查找 ✨&lt;strong&gt;自动生成&lt;/strong&gt;选项，或者在按&lt;strong&gt;“保存”&lt;/strong&gt;按钮时查找。&lt;/p&gt;&lt;h3 id="troubleshoot-alerts-with-keep-last-state"&gt;使用“保留最后状态”对警报进行故障排除&lt;/h3&gt;&lt;p&gt;我们很高兴将“&lt;strong&gt;保留最后状态”&lt;/strong&gt;功能（重新）引入 Grafana 管理的警报规则。&lt;/p&gt;&lt;p&gt;此功能是传统警报中的一项流行功能，可在查询响应或数据源不稳定时帮助维护和管理警报。现在，当规则生成&lt;code&gt;No Data&lt;/code&gt;或&lt;code&gt;Error&lt;/code&gt;结果时，您可以选择保留警报规则的上次评估状态。编辑规则时，只需选择&lt;strong&gt;“保留最后状态”&lt;/strong&gt;选项即可无数据或进行错误处理。&lt;/p&gt;&lt;p&gt;有关更多信息，请参阅有关警报规则的状态和运行状况的&lt;a href="https://grafana.com/docs/grafana/latest/alerting/fundamentals/alert-rules/state-and-health/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana 警报文档&lt;/a&gt;。&lt;/p&gt;&lt;h3 id="improved-overview-of-alert-rule-details"&gt;改进了警报规则详细信息的概述&lt;/h3&gt;&lt;p&gt;警报规则详细视图在 Grafana 11 中进行了彻底改造！现在可以在警报规则详细信息视图的顶部找到有用的元数据。命名空间和组信息显示在面包屑导航中，该导航也是交互式的，可用于按命名空间或组过滤规则。警报详细信息的其余内容分为多个选项卡：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;查询和条件：&lt;/strong&gt;查看用于警报规则的查询的详细信息，包括表达式管道每个步骤的表达式和中间值。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;实例：&lt;/strong&gt;探索每个警报实例、其状态、标签以及多维警报规则的各种其他元数据。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;历史记录：&lt;/strong&gt;查看警报规则的记录历史记录。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;详细信息：&lt;/strong&gt;使用警报规则元数据进行调试或审核并查看警报规则注释。&lt;/li&gt;&lt;/ul&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/docs/alerting/alert-detail-view.png"&gt;&lt;img alt="Grafana 11 中新警报详细信息视图的屏幕截图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 11 中新警报详细信息视图的屏幕截图" src="https://grafana.com/media/docs/alerting/alert-detail-view.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;blockquote&gt;&lt;h3 id="legacy-alerting-to-grafana-alerting-how-to-migrate"&gt;旧警报到 Grafana 警报：如何迁移&lt;/h3&gt;&lt;p&gt;我们&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/legacy-alerting-deprecation"&gt;之前宣布&lt;/a&gt;在 Grafana 9 中弃用旧版警报。从 Grafana 11 开始，旧版警报将从 Grafana 代码库中正式删除，Grafana 11 将于 5 月 14 日全面推出。在 Grafana 10.4 之前的任何版本中&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/?pg=blog&amp;amp;plcmt=body-txt"&gt;升级&lt;/a&gt;到新的 Grafana 警报确保您的警报系统不会中断。有关更多信息，请参阅我们的&lt;a href="https://grafana.com/blog/2024/04/04/legacy-alerting-removal-what-you-need-to-know-about-upgrading-to-grafana-alerting/"&gt;旧版警报博客文章&lt;/a&gt;、 &lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/legacy-alerting-deprecation/?pg=blog&amp;amp;plcmt=body-txt"&gt;旧版警报弃用&lt;/a&gt;文档，并了解如何&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/?pg=blog&amp;amp;plcmt=body-txt#upgrade-alerting"&gt;升级到 Grafana 警报&lt;/a&gt;。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id="easier-to-manage-at-scale"&gt;更易于大规模管理&lt;/h2&gt;&lt;p&gt;在过去的一年里，我们重点关注大规模运营 Grafana 的平台可观察性团队，无论这是否需要数十个、数百个甚至数千个团队使用 Grafana 观察他们的软件和基础设施。考虑到这些，我们优先考虑改进访问、授权以及报告。&lt;/p&gt;&lt;h3 id="organize-grafana-dashboards-with-subfolders"&gt;使用子文件夹组织 Grafana 仪表板&lt;/h3&gt;&lt;p&gt;仪表板进入文件夹，现在……文件夹可以进入文件夹！这听起来像是一个很小的变化，但它具有很大的影响。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;有些人需要子文件夹来保持整洁。仪表板的蔓延很容易失去控制，在嵌套层次结构中设置文件夹有助于解决这个问题。&lt;/p&gt;&lt;p&gt;其他人则需要子文件夹来创建嵌套的权限层，其中团队可以在反映其组织层次结构的不同级别进行访问。&lt;/p&gt;&lt;p&gt;然而，每个人都将受益于子文件夹引入 Grafana 的附加组织层和顺序，特别是当组织从数十个仪表板扩展到数千个仪表板时。&lt;/p&gt;&lt;p&gt;未来，我们计划添加存档和恢复等功能，以便您可以安全地清理未使用的仪表板，并改进搜索，以便您可以快速找到所需的仪表板。&lt;/p&gt;&lt;h3 id="user-based-authentication-in-azure-monitor-data-source"&gt; Azure Monitor 数据源中基于用户的身份验证&lt;/h3&gt;&lt;p&gt;借助这一新的实验性功能，现在可以限制用户对&lt;a href="https://grafana.com/docs/grafana/latest/datasources/azure-monitor/?pg=blog&amp;amp;plcmt=body-txt"&gt;Azure Monitor 数据源&lt;/a&gt;中某些数据的访问。&lt;/p&gt;&lt;p&gt;如果使用 Azure Monitor，则可以转发用户的凭据及其查询，以便使用 Grafana 的每个人都只能访问他们可以在 Azure 控制台中看到的 Azure Monitor 遥测数据。&lt;/p&gt;&lt;p&gt;要了解更多信息，请阅读我们的&lt;a href="https://grafana.com/docs/grafana/next/datasources/azure-monitor/?pg=blog&amp;amp;plcmt=body-txt#configure-current-user-authentication"&gt;Azure Monitor 文档&lt;/a&gt;。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/docs/grafana/data-sources/screenshot-current-user.png"&gt;&lt;img alt="Azure Monitor 数据源 UI 的屏幕截图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Azure Monitor 数据源 UI 的屏幕截图" src="https://grafana.com/media/docs/grafana/data-sources/screenshot-current-user.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="pdf-export-improvements"&gt; PDF 导出改进&lt;/h3&gt;&lt;p&gt;厌倦了等待 PDF 生成或报告发送？我们一直致力于对 Grafana 仪表板转 PDF 功能进行重大更新，以使其更快地处理更大、更复杂的仪表板。&lt;/p&gt;&lt;p&gt;结果：PDF 生成时间将不再与仪表板中的面板数量成正比。例如，包含大约 200 个面板的复杂 SLO 仪表板所需时间从超过 7 分钟缩短到仅 11 秒。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;此更新在公共预览版中提供，还修复了与渲染带有由变量设置为重复的面板或行的报表相关的所有警告，例如在折叠行内渲染重复面板。&lt;/p&gt;&lt;p&gt;要尝试此更新，请启用&lt;code&gt;newPDFRendering&lt;/code&gt; &lt;a href="https://grafana.com/docs/grafana/v11.0/setup-grafana/configure-grafana/feature-toggles/?pg=blog&amp;amp;plcmt=body-txt"&gt;功能切换&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="easier-to-extend-grafana"&gt;更容易扩展 Grafana&lt;/h2&gt;&lt;p&gt;如果您是 Grafana 的扩展或贡献者之一，谢谢您！我们感谢您参与更大的 Grafana 社区，该社区现已拥有 2000 万用户。为了表达我们的谢意，我们致力于通过插件以及更好的插件和应用程序开发工具更轻松地扩展 Grafana 的功能。&lt;/p&gt;&lt;h3 id="scenes-powered-dashboards"&gt;场景驱动的仪表板&lt;/h3&gt;&lt;p&gt;对于 Grafana 10，Grafana 创始人 Torkel Ödegaard &lt;a href="https://grafana.com/blog/2023/08/03/new-in-grafana-10-grafana-scenes-for-building-dynamic-dashboarding-experiences/"&gt;宣布推出 Scenes&lt;/a&gt; ，这是我们针对 Grafana 仪表板的新前端框架。现在，构成仪表板的所有内容（面板、变量、行、时间范围、转换和部分）都是开发人员可以合并到应用程序中的组件。&lt;/p&gt;&lt;p&gt;从那时起，我们一直致力于仪表板架构的重大更新，我们很自豪地宣布它已迁移到场景库。此迁移为我们提供了更稳定、动态和灵活的场景驱动的仪表板。&lt;/p&gt;&lt;p&gt;想要证据吗？以下是我们在 Grafana 11 中引入的两项改进：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;编辑模式：&lt;/strong&gt;在仪表板编辑过程中，有时很难有效地浏览所有可视选项。通过引入编辑模式，我们的目标是提供一种更简单的方式来发现仪表板编辑体验并与之交互。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;模板变量和时间选择器的固定位置：&lt;/strong&gt;我们将时间选择器移至仪表板画布中，现在，当您滚动浏览仪表板时，它将与模板变量一起粘在顶部。这在历史上一直是一个强烈&lt;a href="https://github.com/grafana/grafana/issues/11166" rel="noopener noreferrer" target="_blank"&gt;要求的功能&lt;/a&gt;，我们很高兴最终为社区推出。 &lt;/li&gt;&lt;/ul&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;h3 id="build-better-apps-with-the-saga-design-system"&gt;使用 Saga 设计系统构建更好的应用程序&lt;/h3&gt;&lt;p&gt;我们最近&lt;a href="https://grafana.com/blog/2023/11/07/saga-design-system-shaping-the-future-of-user-experiences-at-grafana-labs/"&gt;推出了 Saga 设计系统&lt;/a&gt;，这是一组设计元素、模式和指南，有助于为 Grafana Labs 的所有产品建立共享的视觉语言。它是 Grafanista 和社区的资源，具有预先建立的组件和原则，用于制作视觉上吸引人且易于使用的界面。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;致力于扩展和发展设计系统的团队最近添加了&lt;a href="https://grafana.com/developers/saga/templates/overview/"&gt;有机体级模板，&lt;/a&gt;以加快更复杂页面的创建；各种模式，以确保 Grafana 体验在整个产品中保持一致和预期；和 Figma 社区文件（ &lt;a href="https://www.figma.com/community/file/1335283438027025375" rel="noopener noreferrer" target="_blank"&gt;浅色主题&lt;/a&gt;与&lt;a href="https://www.figma.com/community/file/1335281252189110233/saga-ui-kit-dark-theme" rel="noopener noreferrer" target="_blank"&gt;深色主题&lt;/a&gt;），以帮助在 Figma 中创建 Grafana 界面模型。请务必关注 Saga 设计系统的不断成熟和扩展其产品。&lt;/p&gt;&lt;h2 id="learn-more-about-grafana-11"&gt;了解有关 Grafana 11 的更多信息&lt;/h2&gt;&lt;p&gt;有关 Grafana 11 预览版中所有新功能的详细列表，请查看我们的&lt;a href="https://grafana.com/docs/grafana/v11.0/whatsnew/whats-new-in-v11-0/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana 文档&lt;/a&gt;、Grafana &lt;a href="https://github.com/grafana/grafana/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank"&gt;变更日志&lt;/a&gt;或我们的&lt;a href="https://grafana.com/docs/grafana/v11.0/whatsnew/whats-new-in-v11-0/?pg=blog&amp;amp;plcmt=body-txt"&gt;新增功能文档&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="join-the-grafana-labs-community"&gt;加入 Grafana 实验室社区&lt;/h2&gt;&lt;p&gt;我们邀请您参与&lt;a href="https://community.grafana.com/?pg=blog&amp;amp;plcmt=body-txt" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs 社区论坛&lt;/a&gt;。分享您使用新功能的体验，讨论最佳实践，并探索将这些更新集成到您的工作流程中的创造性方法。您的见解和用例对于丰富 Grafana 生态系统非常宝贵。&lt;/p&gt;&lt;h2 id="upgrade-to-grafana-11"&gt;升级到 Grafana 11&lt;/h2&gt;&lt;p&gt;立即&lt;a href="https://grafana.com/grafana/download/11.0.0-preview/?pg=blog&amp;amp;plcmt=body-txt"&gt;下载 Grafana 11 预览版&lt;/a&gt;，或通过注册&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;体验所有新功能，它为每个用例提供了真正有用的永久免费套餐和计划。立即注册&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;免费的 Grafana Cloud&lt;/a&gt;帐户。&lt;/p&gt;&lt;p&gt;我们的&lt;a href="https://grafana.com/docs/grafana/latest/upgrade-guide/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana 升级指南&lt;/a&gt;还为那些希望从早期版本升级的用户提供分步说明，以确保顺利过渡。&lt;/p&gt;&lt;h2 id="a-special-thanks-to-our-community"&gt;特别感谢我们的社区&lt;/h2&gt;&lt;p&gt;我们向&lt;a href="https://grafana.com/blog/2023/12/12/the-story-of-grafana-documentary-the-community-behind-the-code/"&gt;Grafana 社区&lt;/a&gt;表示衷心的感谢！&lt;/p&gt;&lt;p&gt;您的贡献，从拉取请求到有价值的反馈，对于不断增强 Grafana 至关重要。您的热情和奉献精神激励我们 Grafana Labs 不断创新并提升 Grafana 平台。&lt;/p&gt;&lt;p&gt; &lt;em&gt;&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;现在免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 11:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/grafana-11-release-all-the-new-features/</guid></item><item><title>GrafanaCON 2024：Grafana Labs 所有公告指南</title><link>https://grafana.com/blog/2024/04/09/grafanacon-2024-a-guide-to-all-the-announcements-from-grafana-labs/</link><description>&lt;p&gt;郁金香盛开。阳光明媚的自行车骑行。最新的可观测性趋势。所有迹象都表明阿姆斯特丹正值春天，Grafana Labs 很高兴能够在五年内首次亲自举办 GrafanaCON 2024。&lt;/p&gt;&lt;p&gt;我们的年度会议重点关注 Grafana 及其扩展的开源生态系统，于 4 月 9 日开幕，现场座无虚席，大家齐聚一堂，通过 20 多场演讲、深入探讨和实践课程学习，内容涵盖 Grafana、Prometheus、OpenTelemetry、Loki、Mimir 、节奏等等。但在我们深入讨论 Grafana 的酷炫用例（从监控啤酒生产到“可观察性”）之前，我们以充满动感的主题演讲拉开了为期两天的会议的序幕，其中包含新的 OSS 版本，以及我们年度 Golden Grot 的社区获奖者奖项等等。&lt;/p&gt;&lt;p&gt;在这篇博文中，您将找到 GrafanaCON 2024 最新消息的摘要。想了解更多信息吗？不要错过报名参加我们的&lt;a href="https://grafana.com/go/webinar/grafanacon-2024-keynote-recap/"&gt;回顾网络研讨会之一的机会，该研讨会将重点介绍 GrafanaCON 2024 的所有头条新闻&lt;/a&gt;。 （我们将用不同的语言举办这些回顾会议！）&lt;/p&gt;&lt;h2 id="grafana-11-release"&gt; Grafana 11 发布&lt;/h2&gt;&lt;p&gt;按照惯例，我们在 GrafanaCON 的开幕主题演讲中预览了 Grafana 11 的所有最新更新。 Grafana 创始人 Torkel Ödegaard 现场演示了最新的可视化和功能，旨在帮助在可观测性生态系统中运行、管理和扩展 Grafana。&lt;/p&gt;&lt;figure class="figure-wrapper w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/blog/2024/04/09/grafana-11-release-all-the-new-features/"&gt;&lt;img alt="Grafana 11 徽标。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 11 徽标。" src="https://grafana.com/media/blog/grafanacon2024-announcements/grafanacon2024-announcements-grafana-11.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt; Grafana 11 现已推出预览版，包含令人兴奋的功能，例如：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;探索 Metrics&lt;/strong&gt; ，一种新的无查询体验，让您无需编写任何 PromQL 即可深入研究 Prometheus 指标。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;场景驱动的仪表板&lt;/strong&gt;，其中包括新的仪表板编辑模式以及模板变量和时间选择器的固定定位，应社区的要求！&lt;/li&gt;&lt;li&gt; &lt;strong&gt;Canvas面板中的流程图&lt;/strong&gt;，其中包括更多连接器样式（虚线、角半径、方向控制）；连接器的水平和垂直卡扣；以及旋转元素的能力。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;改进的警报规则概述&lt;/strong&gt;，在顶部提供有用的元数据，在有用的选项卡中提供更多信息。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;还有很多很多！有关 Grafana 11 预览版中所有新功能的详细列表，请查看我们的&lt;a href="https://grafana.com/docs/grafana/v11.0/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana 文档&lt;/a&gt;、Grafana &lt;a href="https://github.com/grafana/grafana/blob/main/CHANGELOG.md" rel="noopener noreferrer" target="_blank"&gt;变更日志&lt;/a&gt;或我们的&lt;a href="https://grafana.com/docs/grafana/v11.0/whatsnew/whats-new-in-v11-0/?pg=blog&amp;amp;plcmt=body-txt"&gt;新增功能文档&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;您可以立即通过&lt;a href="https://grafana.com/docs/grafana/latest/installation/upgrading/?pg=blog&amp;amp;plcmt=body-txt"&gt;升级实例&lt;/a&gt;或&lt;a href="https://grafana.com/grafana/download/?pg=blog&amp;amp;plcmt=body-txt"&gt;下载 Grafana 11 预览版来&lt;/a&gt;探索&lt;em&gt;所有&lt;/em&gt;新功能。等不及要开始了吗？注册 Grafana Cloud，这是我们完全托管的可观察性平台，其中包括所有这些 Grafana 功能以及更多功能。我们为每个用例提供慷慨的免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;立即获取您的免费帐户！&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;注意：这个最新版本的 Grafana 是预览版，因此您可以开始测试和使用更新，但我们不建议在生产中部署它们。我们将在 5 月 14 日之前进行内部测试，届时 Grafana 11 将全面可用。&lt;/em&gt;&lt;/p&gt;&lt;p&gt;有兴趣听更多吗？查看我们的&lt;a href="https://grafana.com/blog/2024/04/09/grafana-11-release-all-the-new-features/"&gt;Grafana 11 发布博客&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="grafana-loki-30-release"&gt; Grafana Loki 3.0 发布&lt;/h2&gt;&lt;p&gt;项目开始五年后，流行的开源日志项目&lt;a href="https://grafana.com/oss/loki/"&gt;Grafana Loki&lt;/a&gt;背后的团队自豪地宣布发布 3.0 版本。此主要版本带来了日志查询性能和 OpenTelemetry 摄取的重要更新。&lt;/p&gt;&lt;figure class="figure-wrapper w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/"&gt;&lt;img alt="Grafana Loki 标志。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana Loki 标志。" src="https://grafana.com/media/blog/grafanacon2024-announcements/grafanacon2024-announcements-loki-3.0.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;借助 Bloom 过滤器，Loki 现在可以提供加速查询，在搜索日志数据以查找特定信息时更加高效。 Bloom 过滤器无需检查每个日志行，而是使 Loki 能够搜索文本字符串，例如订单 ID 或用户 ID，从而跳过不包含您正在查找的信息的大块数据。这就像一张地图，可以显示日志数据大海捞针的位置，这样您就不必搜索整个数据。&lt;/p&gt;&lt;p&gt;在 Loki 3.0 中，我们还引入了对 OpenTelemetry 日志的本机支持。在我们的&lt;a href="https://grafana.com/observability-survey/#oss-is-the-de-facto-approach-to-observability"&gt;2024 年可观测性调查中，&lt;/a&gt; 54% 的受访者表示，他们使用 OpenTelemetry 的次数比去年&lt;em&gt;更多&lt;/em&gt;，并且 OTel 的采用率持续增长。借助 Loki 3.0，您现在可以提取、存储和查询 OTLP 日志和元数据以解决问题。&lt;/p&gt;&lt;p&gt;要了解有关开源日志记录最新动态的更多信息，请阅读&lt;a href="https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/"&gt;Loki 3.0 公告博客&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="introducing-grafana-alloy"&gt; Grafana 合金简介&lt;/h2&gt;&lt;p&gt;我们很高兴地宣布我们最新的 OSS 项目：Grafana Alloy，我们的 OpenTelemetry Collector 开源发行版。 Alloy 是一种遥测收集器，100% OTLP 兼容，并为 OpenTelemetry 和 Prometheus 遥测格式提供本机管道，支持指标、日志、跟踪和配置文件。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;我们在与 Grafana Agent 合作的基础上构建了 Alloy，同时还结合了我们多年来见过的一些最困难的用例中吸取的经验教训。因此，Alloy（已投入生产并作为 v1.0 发布）与最流行的开源遥测信号广泛兼容。此外，它还包括企业级功能，例如用于大规模生产的本机集群和用于增强安全性的内置 Hashicorp Vault 支持，全部都是开箱即用的。&lt;/p&gt;&lt;p&gt;请访问我们的&lt;a href="https://grafana.com/blog/2024/04/09/grafana-alloy-opentelemetry-collector-with-prometheus-pipelines/"&gt;Grafana Alloy 公告博客&lt;/a&gt;，了解有关 Grafana Labs 最新开源项目的更多信息。&lt;/p&gt;&lt;h2 id="introducing-the-2024-golden-grot-award-winners"&gt; 2024 年金格罗特奖获奖者介绍&lt;/h2&gt;&lt;p&gt;今年，我们举办了第二届年度 Golden Grot 奖，表彰专业和个人 Grafana 仪表板中的最佳作品。今天，我们很荣幸地介绍 2024 年金格罗特奖获得者，他们在 GrafanaCON 主题演讲期间在舞台上受到认可。击鼓请...&lt;/p&gt;&lt;h3 id="monitoring-a-daily-commute-in-atlanta-ruben-fernandez"&gt;监控亚特兰大的日常通勤：Ruben Fernandez&lt;/h3&gt;&lt;p&gt; Ruben 建立了自己的个人仪表板，以改善他在亚特兰大的日常通勤状况，亚特兰大的交通可能会受到恶劣天气和交通拥堵的严重影响。他使用 API 和 GTFS 实时源从 Weather.gov 和亚特兰大大都会交通局获取数据，并从 Google 地图和 Bing 地图获取行车时间和交通信息。他还使用 Python 的 Prometheus 检测库来组合指标并通过 Grafana Agent 将它们发送到 Grafana Cloud。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/golden-grot-voting-24/ruben-fernandez.png"&gt;&lt;img alt="Ruben Fernandez 的仪表板屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Ruben Fernandez 的仪表板屏幕截图。" src="https://grafana.com/media/blog/golden-grot-voting-24/ruben-fernandez.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="monitoring-defects-in-steel-alloys-christopher-field"&gt;监测钢合金中的缺陷：Christopher Field&lt;/h3&gt;&lt;p&gt;克里斯托弗的仪表板监测钢合金中由于暴露于下一代核裂变反应堆和聚变能的辐射而引起的缺陷的增长。来自电子显微镜的图像被传输到时间序列数据库，并使用机器学习模型来立即识别缺陷。该专业仪表板在 Christopher 的 Theia Scientific 同事内部共享，其他变体则由美国能源部 (DOE) 国家实验室和研究型大学使用。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/golden-grot-voting-24/christopher-field.png"&gt;&lt;img alt="Christopher Field 的仪表板屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Christopher Field 的仪表板屏幕截图。" src="https://grafana.com/media/blog/golden-grot-voting-24/christopher-field.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;祝贺我们的两位获奖者和所有决赛入围者！&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link captioned" href="https://grafana.com/media/blog/grafanacon2024-announcements/golden-grot-awards-2024-winners.JPG"&gt;&lt;img alt="A photo of the 2024 Golden Grot Awards winners." class="lazyload mb-0" title="*2024 年金格罗特奖得主克里斯托弗·菲尔德（左）和鲁本·费尔南德斯（右）。*" /&gt; &lt;noscript&gt;&lt;img alt="A photo of the 2024 Golden Grot Awards winners." src="https://grafana.com/media/blog/grafanacon2024-announcements/golden-grot-awards-2024-winners.JPG" title="*2024 年金格罗特奖得主克里斯托弗·菲尔德（左）和鲁本·费尔南德斯（右）。*" /&gt;&lt;/noscript&gt;&lt;figcaption class="w-100p caption mb-1 text-gray-13 "&gt; &lt;em&gt;2024 年金格罗特奖得主克里斯托弗·菲尔德（左）和鲁本·费尔南德斯（右）。&lt;/em&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;要了解有关今年获奖者的更多信息，请查看我们的&lt;a href="https://grafana.com/about/events/grafanacon/2024/golden-grot-awards/"&gt;Golden Grots 网页&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;em&gt;有关这些公告的更多信息，请阅读我们&lt;a href="https://grafana.com/about/press/2024/04/09/grafana-labs-unveiled-open-source-project-updates-at-annual-grafanacon-community-conference/"&gt;有关 GrafanaCON 2024 的完整新闻稿&lt;/a&gt;。&lt;/em&gt;&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 11:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/grafanacon-2024-a-guide-to-all-the-announcements-from-grafana-labs/</guid></item><item><title>Loki 3.0 发布：布隆过滤器、原生 OpenTelemetry 支持等等！</title><link>https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/</link><description>&lt;p&gt;欢迎来到 Grafana Loki 的下一章！经过&lt;a href="https://grafana.com/blog/2023/12/11/open-source-log-monitoring-the-concise-guide-to-grafana-loki/"&gt;五年的专注开发&lt;/a&gt;、无数个小时的改进以及令人难以置信的社区的支持，我们很高兴地宣布&lt;a href="https://github.com/grafana/loki" rel="noopener noreferrer" target="_blank"&gt;Grafana Loki 3.0&lt;/a&gt;现已全面上市。&lt;/p&gt;&lt;p&gt;从 2.0 到 3.0 的旅程中，Loki 发生了许多令人印象深刻的变化。 Loki 现在的性能更高，并且能够处理更大的规模 - 同时保持其效率和简单性的根源。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/loki-3-0-release/milestones.png"&gt;&lt;img alt="显示 Loki 从 2019 年推出至今的各个里程碑的图表" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示 Loki 从 2019 年推出至今的各个里程碑的图表" src="https://grafana.com/media/blog/loki-3-0-release/milestones.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;这一进展受到了社区的热烈欢迎（顺便说一句，我们非常感谢社区帮助我们实现这一目标！）。在过去的一年里，我们实现并超越了一些非常酷的里程碑——仅举几例， &lt;a href="https://grafana.com/blog/2023/09/11/grafana-loki-hits-20k-github-stars-20-fun-facts-about-the-open-source-logging-project/"&gt;20,000 个 GitHub star&lt;/a&gt;和超过 100,000 个活跃集群。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/loki-3-0-release/star-history.png"&gt;&lt;img alt="图表显示了 Loki 的 GitHub 星数增长情况" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="图表显示了 Loki 的 GitHub 星数增长情况" src="https://grafana.com/media/blog/loki-3-0-release/star-history.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;借助 Loki 3.0，我们很高兴能在该项目的成功基础上再接再厉，并推出一些非常酷的功能。继续阅读，您将看到我们如何忠于 Loki 的根源——规模上的简单性并为开发人员做出正确的权衡——同时进一步努力使 Loki 成为开发人员（以及更多！）最简单的日志聚合平台使用。&lt;/p&gt;&lt;p&gt;让我们深入了解吧！&lt;/p&gt;&lt;h2 id="query-acceleration-with-bloom-filters"&gt;使用布隆过滤器加速查询&lt;/h2&gt;&lt;p&gt;我们很高兴与大家分享 Loki 3.0 中最酷的新增功能之一：&lt;strong&gt;使用 Bloom 过滤器进行查询加速&lt;/strong&gt;，这是一项实验性功能，可让您比以往更快地找到所需的特定日志数据。&lt;/p&gt;&lt;p&gt;想象一下，试图在数百万条消息中找到一条隐藏的特定消息 — 这就像大海捞针一样。 Loki 的构建目的是，当您大致知道要查找的位置（换句话说，要过滤的一些标签选择器）时，可以非常快速地查找日志数据；但现在，借助 Bloom 过滤器带来的查询加速，我们将能够更好地支持这种“大海捞针”用例。&lt;/p&gt;&lt;p&gt;在布隆过滤器出现之前，Loki 必须检查每一个过滤器。单身的。日志。线。在所有匹配的流中找到您需要的内容。如果你想从昨天的数据中找到一条信息，Loki 就必须加载当天的所有内容，并一一检查每一行日志。随着存储的日志数据量的增加，Loki 将需要更多的计算能力来在查询时处理数据。由于 Grafana Labs 大规模运营 Loki，我们看到了在海量数据中优化过滤特定数据的机会。&lt;/p&gt;&lt;p&gt;这就是 Bloom 过滤器发挥作用的地方，它使 Loki 在搜索日志数据时变得更加智能和高效。 Bloom 过滤器无需检查每个日志，而是使 Loki 能够搜索字符串（例如订单 ID 或用户 ID），从而跳过不包含您正在查找的信息的大块数据。这就像有一张地图，可以显示大海捞针可能在哪里，这样你就不必搜索整个东西。&lt;/p&gt;&lt;p&gt;所有迹象都表明布隆过滤器确实有效。早期的内部测试表明，使用 Bloom 过滤器，Loki 可以在运行查询时跳过很大一部分日志数据。我们的开发环境测试表明，我们现在可以过滤掉之前处理查询所需的 70% 到 90% 的块。&lt;/p&gt;&lt;p&gt;下面是我们在使用布隆过滤器运行“大海捞针”搜索之一时看到的结果示例。该查询包含多个过滤条件，代表了我们看到客户在由 Loki 提供支持的 Grafana Cloud Logs 上运行的典型用例。您将看到我们绕过的块和流的数量：&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/loki-3-0-release/filter-ratio.png"&gt;&lt;img alt="Grafana 仪表板显示 89.5% 的块和 97.5% 的系列被 Bloom 过滤器绕过" class="lazyload " /&gt; &lt;noscript&gt;&lt;img alt="Grafana 仪表板显示 89.5% 的块和 97.5% 的系列被 Bloom 过滤器绕过" src="https://grafana.com/media/blog/loki-3-0-release/filter-ratio.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;结果太棒了！接触更少的数据意味着更快的搜索返回时间和更少的资源压力。&lt;/p&gt;&lt;p&gt;这是一个非常有前途的实验性功能，随着我们在 Loki 中使其变得更简单、更快，它的未来会更加光明！要了解有关查询加速的更多信息，并了解如何在 Loki 集群中启用 Bloom 过滤器，请查看我们的&lt;a href="https://grafana.com/docs/loki/latest/operations/query-acceleration-blooms/?pg=blog&amp;amp;plcmt=body-txt"&gt;加速查询文档&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="native-opentelemetry-support"&gt;原生 OpenTelemetry 支持&lt;/h2&gt;&lt;p&gt;Loki 团队认识到 OpenTelemetry 正在迅速获得采用。在我们的&lt;a href="https://grafana.com/observability-survey/?pg=blog&amp;amp;plcmt=body-txt#oss-is-the-de-facto-approach-to-observability"&gt;2024 年可观测性调查&lt;/a&gt;中，54% 的受访者表示他们比去年更多地使用 OpenTelemetry。 OpenTelemetry 旨在提供一种与供应商无关的方式来轻松检测应用程序或系统，无论其语言、基础设施或运行时环境如何。这一愿景与 Loki 满足用户需求的原则非常一致。&lt;/p&gt;&lt;p&gt;虽然已经可以使用&lt;a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/exporter/lokiexporter/README.md" rel="noopener noreferrer" target="_blank"&gt;Loki Exporter&lt;/a&gt;将 OTel 日志提取到 Loki，但它并没有提供最佳的查询体验。之前的方法以 JSON 格式序列化数据，然后需要在查询时对其进行反序列化，以便与日志记录中的 OTel 属性和元数据进行交互。可行，但并不简单。&lt;/p&gt;&lt;p&gt;为了向选择 OpenTelemetry 的用户提供原生 OTel 日志记录体验，我们在 Loki 3.0 中添加了原生 OpenTelemetry 摄取支持。&lt;/p&gt;&lt;p&gt;以下是 Loki 的原生 OpenTelemetry 端点相对于 Loki Exporter 带来的一些优势：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;简化的摄取管道：&lt;/strong&gt;通过消除将 Loki Exporter 放置在 OpenTelemetry 收集器（例如&lt;a href="https://grafana.com/blog/2024/04/09/grafana-alloy-opentelemetry-collector-with-prometheus-pipelines/"&gt;Grafana Alloy&lt;/a&gt; ）和 Grafana Cloud 之间的需要，您的日志摄取管道看起来更加简化。您只需更新端点即可轻松从任何其他 OTel 兼容的日志存储切换到 Loki。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;改进的查询体验：&lt;/strong&gt;通过利用&lt;a href="https://grafana.com/docs/loki/latest/get-started/labels/structured-metadata/?pg=blog&amp;amp;plcmt=body-txt"&gt;结构化元数据&lt;/a&gt;，Loki 的原生 OpenTelemetry 实现可让您在查询时与所有 OpenTelemetry 属性和日志事件元数据进行交互，而无需进行任何反序列化。以下是一些示例屏幕截图，显示了如何更轻松地查询通过 Loki 的本机 OTel 摄取端点摄取的 OTel 日志，而不是通过 Loki Exporter：&lt;/li&gt;&lt;/ul&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link captioned" href="https://grafana.com/media/blog/loki-3-0-release/log-exporter-format.png"&gt;&lt;img alt="A Loki query using the Loki Exporter format" class="lazyload mb-0" title="***旧格式（Loki 导出器）***" /&gt; &lt;noscript&gt;&lt;img alt="A Loki query using the Loki Exporter format" src="https://grafana.com/media/blog/loki-3-0-release/log-exporter-format.png" title="***旧格式（Loki 导出器）***" /&gt;&lt;/noscript&gt;&lt;figcaption class="w-100p caption mb-1 text-gray-13 text-center "&gt;&lt;em&gt;&lt;strong&gt;旧格式（Loki 导出器）&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt;&lt;/figure&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link captioned" href="https://grafana.com/media/blog/loki-3-0-release/otlp-endpoint-format.png"&gt;&lt;img alt="A much shorter query using the OTel ingestion endpoint format" class="lazyload mb-0" title="***新格式（OTLP 端点）***" /&gt; &lt;noscript&gt;&lt;img alt="A much shorter query using the OTel ingestion endpoint format" src="https://grafana.com/media/blog/loki-3-0-release/otlp-endpoint-format.png" title="***新格式（OTLP 端点）***" /&gt;&lt;/noscript&gt;&lt;figcaption class="w-100p caption mb-1 text-gray-13 text-center "&gt;&lt;em&gt;&lt;strong&gt;新格式（OTLP 端点）&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;以下是 OpenTelemetry 日志在 Loki 中的存储方式：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;索引：&lt;/strong&gt;资源属性很好地映射到 Loki 中的索引标签，因为两者通常都标识日志的来源。由于 Loki 可以很好地处理有限的索引标签集，因此默认情况下，Loki 选择一些关键属性存储为索引标签，而其余资源属性则存储为每个日志条目的&lt;a href="https://grafana.com/docs/loki/next/get-started/labels/structured-metadata/?pg=blog&amp;amp;plcmt=body-txt"&gt;结构化元数据&lt;/a&gt;。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;Timestamp：&lt;/strong&gt; &lt;code&gt;LogRecord.TimeUnixNano&lt;/code&gt;或&lt;code&gt;LogRecord.ObservedTimestamp&lt;/code&gt;之一，根据其中之一进行设置。如果两者均未设置，则将使用摄取时间戳。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;LogLine：&lt;/strong&gt; &lt;code&gt;LogRecord.Body&lt;/code&gt;保存日志的主体。但是，由于 Loki 仅支持字符串格式的日志主体，因此我们将使用&lt;a href="https://github.com/open-telemetry/opentelemetry-collector/blob/ab3d6c5b64701e690aaa340b0a63f443ff22c1f0/pdata/pcommon/value.go#L353" rel="noopener noreferrer" target="_blank"&gt;OTEL 收集器库中的 AsString 方法对&lt;/a&gt;非字符串值进行字符串化。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;&lt;a href="https://grafana.com/docs/loki/next/get-started/labels/structured-metadata/?pg=blog&amp;amp;plcmt=body-txt"&gt;结构化元数据&lt;/a&gt;：&lt;/strong&gt;任何无法存储在索引标签和 LogLine 中的内容都将存储为结构化元数据。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;请查看我们的文档，了解有关&lt;a href="https://grafana.com/docs/loki/latest/send-data/otel/?pg=blog&amp;amp;plcmt=body-txt#format-considerations"&gt;如何在 Loki 中存储 OTel 日志&lt;/a&gt;以及&lt;a href="https://grafana.com/docs/loki/latest/send-data/otel/?pg=blog&amp;amp;plcmt=body-txt#changing-the-default-mapping-of-otlp-to-loki-format"&gt;如何使用每租户 OTLP 配置更改数据在 Loki 中存储方式的&lt;/a&gt;更多详细信息。&lt;/p&gt;&lt;h2 id="loki-documentation-improvements"&gt; Loki 文档改进&lt;/h2&gt;&lt;p&gt;Loki 注重简单性，我们相信更好的文档使我们的产品更易于使用。文档和工程团队一直致力于更新&lt;a href="https://grafana.com/docs/loki/latest/?pg=blog&amp;amp;plcmt=body-txt"&gt;Loki 文档&lt;/a&gt;，以便新用户更容易上手。&lt;/p&gt;&lt;p&gt;除了&lt;a href="https://grafana.com/docs/loki/latest/get-started/?pg=blog&amp;amp;plcmt=body-txt"&gt;刷新“入门”部分&lt;/a&gt;中的内容之外，我们还引入了一个新的 &lt;a href="https://grafana.com/docs/loki/latest/get-started/quick-start/?pg=blog&amp;amp;plcmt=body-txt"&gt;快速入门&lt;/a&gt;主题，该主题将引导您完成几个示例查询，以便您可以在 Grafana 中查看日志数据。我们还完善了一些最常访问的部分： &lt;a href="https://grafana.com/docs/loki/latest/reference/api/?pg=blog&amp;amp;plcmt=body-txt"&gt;API&lt;/a&gt;文档、&lt;a href="https://grafana.com/docs/loki/latest/configure/?pg=blog&amp;amp;plcmt=body-txt"&gt;配置&lt;/a&gt;参考和&lt;a href="https://grafana.com/docs/loki/latest/operations/storage/?pg=blog&amp;amp;plcmt=body-txt"&gt;存储&lt;/a&gt;文档均已更新以反映弃用内容，并且已删除过时的配置选项。&lt;/p&gt;&lt;p&gt; &lt;a href="https://grafana.com/docs/enterprise-logs/latest/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Enterprise Logs (GEL) 文档&lt;/a&gt;也已重新组织，陈旧的 Loki 内容已更新。&lt;/p&gt;&lt;h2 id="i-dont-want-to-learn-logql"&gt; “我不想学习 LogQL”&lt;/h2&gt;&lt;p&gt;哎呀……错误的博客！您必须&lt;a href="https://grafana.com/blog/2024/04/09/find-your-logs-data-with-explore-logs-no-logql-required/"&gt;查看我们关于探索日志的其他文章&lt;/a&gt;才能了解这一切。&lt;/p&gt;&lt;h2 id="cleaning-up-the-campsite-and-a-word-about-upgrading"&gt;清理营地，以及关于升级的说明&lt;/h2&gt;&lt;p&gt;我们利用这个主要版本的机会为用户和维护人员进行了多项生活质量改进，以帮助使 Loki 更易于使用。这包括对 Helm 图表的改进，以便比以往更轻松地运行 Loki。当您亲自尝试 Loki 3.0 时，请仔细阅读我们的&lt;a href="https://grafana.com/docs/loki/latest/release-notes/v3-0/?pg=blog&amp;amp;plcmt=body-txt"&gt;发行说明&lt;/a&gt;和&lt;a href="https://grafana.com/docs/loki/latest/upgrading/?pg=blog&amp;amp;plcmt=body-txt#300"&gt;升级指南&lt;/a&gt;！&lt;/p&gt;&lt;p&gt;我们还使用此 Loki 3.0 版本来协调 Loki（我们的开源产品）和 Grafana Enterprise Logs (GEL)（我们由 Loki 提供支持的企业产品）的语义版本控制。 GEL 3.0 将于 4 月 11 日发布。如果您正在使用 Grafana Enterprise Logs (GEL)，请再次在升级到 GEL 3.0 之前查看可用的发行说明和相关&lt;a href="https://grafana.com/docs/enterprise-logs/latest/"&gt;文档&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="thank-you-to-the-grafana-loki-community"&gt;感谢 Grafana Loki 社区！&lt;/h2&gt;&lt;p&gt; Loki 3.0 的实现是社区共同努力的结果。我们谨代表 Grafana Labs 和 Loki 团队衷心感谢所有用户和贡献者的努力和承诺。&lt;/p&gt;&lt;p&gt;我们很想听听您的反馈！进入&lt;a href="https://slack.grafana.com/" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs Community Slack&lt;/a&gt;上的&lt;a href="https://grafana.slack.com/archives/C06RUQJHTHQ" rel="noopener noreferrer" target="_blank"&gt;#loki-3&lt;/a&gt;频道或在 GitHub 上找到 Loki，并告诉我们您的想法。&lt;/p&gt;&lt;p&gt; &lt;em&gt;&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;现在免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 11:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/grafana-loki-3.0-release-all-the-new-features/</guid></item><item><title>从代理到合金：为什么我们过渡到合金收集器以及为什么您也应该这样做</title><link>https://grafana.com/blog/2024/04/09/grafana-agent-to-grafana-alloy-opentelemetry-collector-faq/</link><description>&lt;p&gt;当我们在 2020 年首次&lt;a href="https://grafana.com/blog/2020/03/18/introducing-grafana-cloud-agent-a-remote_write-focused-prometheus-agent-that-can-save-40-on-memory-usage/"&gt;推出 Grafana Agent&lt;/a&gt;时，它是一个广泛的 OSS 解决方案，解决了随着 Prometheus 变得更加流行和用例变得更加复杂而出现的常见问题。 Grafana Agent 的构建目标是灵活、高性能且与多个生态系统兼容，无论最终目的地是 Grafana Cloud、Grafana LGTM Stack 的本地设置（ &lt;a href="https://grafana.com/oss/loki/?pg=blog&amp;amp;plcmt=body-txt"&gt;Loki&lt;/a&gt;用于日志、 &lt;a href="https://grafana.com/oss/grafana?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana&lt;/a&gt;用于可视化、 &lt;a href="https://grafana.com/oss/tempo/?pg=blog&amp;amp;plcmt=body-txt"&gt;Tempo&lt;/a&gt;用于跟踪、 &lt;a href="https://grafana.com/oss/mimir/?pg=blog&amp;amp;plcmt=body-txt"&gt;Mimir&lt;/a&gt;用于跟踪）指标），或传统的 Prometheus 服务器。&lt;/p&gt;&lt;p&gt; Grafana Agent 也被证明是&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;的完美搭配，Grafana Cloud 的创建是为了解决规模化 Prometheus 数据的集中化和长期存储问题。 Grafana Agent 成为该解决方案的关键部分，主要充当转发器，只需要较小的本地对象存储空间即可进行备份和恢复。&lt;/p&gt;&lt;p&gt;多年来，我们开发了更多的代理。我们针对 Loki 日志推出了 Promtail，针对 Kubernetes 特定案例推出了 Grafana Agent Operator。虽然我们喜欢在用户所在的地方与他们见面，但提供太多选项通常会使我们更难以确定要使用的代理和部署方法。如果您的整体架构（例如，VM 和 Kubernetes 集群）中混合了这两种需求，那么单独的二进制文件意味着必须管理和安装不同的服务。&lt;/p&gt;&lt;p&gt; &lt;a href="https://grafana.com/oss/alloy-opentelemetry-collector/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Alloy&lt;/a&gt;登场，它是 Grafana Agent 的精神继承者。 Alloy 是我们新的 OpenTelemetry Collector 开源发行版，它 100% OTLP 兼容，并为 OpenTelemetry 和 Prometheus 遥测格式提供本机管道，支持指标、日志、跟踪和配置文件。它可以满足您对 Grafana Agent 项目和我们其他代理的所有期望 - 还有更多。如果您当前在可观察性堆栈中使用 Grafana Agent，我们鼓励您迁移到 Alloy。请访问我们的&lt;a href="https://grafana.com/blog/2024/04/09/grafana-alloy-opentelemetry-collector-with-prometheus-pipelines/"&gt;Grafana Alloy 公告博客&lt;/a&gt;以了解更多信息。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/grafana-alloy-launch/grafana-alloy-architecture-diagram-2.png"&gt;&lt;img alt="Grafana合金架构图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana合金架构图" src="https://grafana.com/media/blog/grafana-alloy-launch/grafana-alloy-architecture-diagram-2.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;但我们知道您一定有疑问。在这篇博文中，我们尝试回答其中的一些问题，但我们始终愿意听到更多信息。请在&lt;a href="https://slack.grafana.com/" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs Community Slack&lt;/a&gt;的 #alloy 频道中找到我们，或者查看&lt;a href="https://github.com/grafana/alloy/" rel="noopener noreferrer" target="_blank"&gt;GitHub 中的 Grafana Alloy&lt;/a&gt; 。&lt;/p&gt;&lt;h2 id="1-what-happens-to-grafana-agent"&gt; 1. Grafana Agent 会发生什么情况？&lt;/h2&gt;&lt;p&gt; Grafana Agent 和 Grafana Agent Operator 已弃用，将从今天（2024 年 4 月 9 日）开始进入长期支持。这意味着 Grafana Agent 和 Grafana Agent Operator 将不再收到任何新功能更新，因为所有未来的创新都将集中在 Alloy 上。因此，Grafana Agent 和 Grafana Agent Operator 将仅收到关键错误修复和安全修复。我们建议您开始计划向新的 Grafana Alloy 收集器的过渡。商业支持将持续到 LTS 阶段结束，我们预计该阶段将在大约 18 个月后于&lt;strong&gt;2025 年 10 月 31 日&lt;/strong&gt;结束。&lt;/p&gt;&lt;p&gt; LTS 结束后，Grafana Agent 和 Grafana Agent Operator 的生命周期终止 (EOL) 阶段将开始。 Grafana Agent 和 Grafana Agent Operator 预计将于&lt;strong&gt;2025 年 11 月 1 日&lt;/strong&gt;达到 EOL。一旦达到 EOL，这两个项目将不再收到错误修复或安全修复。建议所有用户在此日期之前停止使用 Grafana Agent，转而使用新的 Grafana Alloy 收集器。一般来说，除非根据具体情况具体说明，否则一旦达到 EOL，商业支持就会终止。&lt;/p&gt;&lt;h2 id="2-what-happens-to-grafana-agents-flow-mode"&gt; 2. Grafana Agent 的 Flow 模式会发生什么情况？&lt;/h2&gt;&lt;p&gt;随着 Alloy 的推出，Grafana Agent 的&lt;a href="https://grafana.com/docs/agent/latest/flow/?pg=blog&amp;amp;plcmt=body-txt"&gt;Flow 模式&lt;/a&gt;也将被弃用。这是现已弃用的 Grafana Agent 的实验模式，为 Grafana Alloy 奠定了基础。这对于推出我们的新收集器很有帮助，我们感谢大家尽早尝试，提供反馈，并帮助我们最终推出 Alloy。向合金的过渡也是我们进一步简化构成新收集器的组件的机会。使用 Grafana Alloy，您将只需使用 Alloy 语法与&lt;code&gt;.alloy&lt;/code&gt;文件进行交互，而不是 Flow 模式和 River 概念。&lt;/p&gt;&lt;p&gt;对于 Flow 的当前用户，我们鼓励您将工作负载转移到 Alloy，并且您可以期望转换后体验几乎相同。您必须下载新的二进制文件并将您的配置移至新收集器，但随后您可以访问 Grafana Alloy 中最新、最强大的功能。&lt;/p&gt;&lt;h2 id="3-whats-the-best-way-to-get-started-with-alloy"&gt; 3. 开始使用 Alloy 的最佳方式是什么？&lt;/h2&gt;&lt;p&gt;注册&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;免费的 Grafana Cloud 帐户&lt;/a&gt;并使用我们易于使用的集成或解决方案之一，例如&lt;a href="https://grafana.com/solutions/kubernetes/?pg=blog&amp;amp;plcmt=body-txt"&gt;Kubernetes 监控&lt;/a&gt;或 &lt;a href="https://grafana.com/products/cloud/application-observability/?pg=blog&amp;amp;plcmt=body-txt"&gt;应用程序可观察性&lt;/a&gt;。我们提供清晰的指导说明来配置这些产品以利用 Alloy。&lt;/p&gt;&lt;h2 id="4-how-do-i-migrate-to-alloy-from-agent-and-other-grafana-tools"&gt; 4. 如何从 Agent 和其他 Grafana 工具迁移到 Alloy？&lt;/h2&gt;&lt;p&gt;如果您当前正在使用 Grafana 工具，例如 Grafana Agent 或 Grafana Agent Operator，我们可以根据您的使用案例提供用于迁移到 Grafana Alloy 的转换器和工具。&lt;/p&gt;&lt;ul&gt;&lt;li&gt; &lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-operator/?pg=blog&amp;amp;plcmt=body-txt"&gt;从运营商迁移&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-prometheus/?pg=blog&amp;amp;plcmt=body-txt"&gt;从普罗米修斯迁移&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-promtail/?pg=blog&amp;amp;plcmt=body-txt"&gt;从 Promtail 迁移&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-static/?pg=blog&amp;amp;plcmt=body-txt"&gt;从 Grafana Agent Static 迁移&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-flow/?pg=blog&amp;amp;plcmt=body-txt"&gt;从 Grafana Agent Flow 迁移&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="5-how-do-i-migrate-from-an-existing-tool-like-the-vanilla-opentelemetry-collector"&gt; 5. 如何从现有工具（例如普通 OpenTelemetry Collector）迁移？&lt;/h2&gt;&lt;p&gt;还有一个转换器和指南！&lt;/p&gt;&lt;ul&gt;&lt;li&gt; &lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/from-otelcol/?pg=blog&amp;amp;plcmt=body-txt"&gt;从 OpenTelemetry Collector 迁移&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="6-can-i-still-use-the-opentelemetry-collector-to-send-data-to-grafana-cloud"&gt; 6. 我仍然可以使用 OpenTelemetry Collector 将数据发送到 Grafana Cloud 吗？&lt;/h2&gt;&lt;p&gt;是的。虽然 Alloy 是 OpenTelemetry Collector 的品牌发行版，具有自己的一组增强功能，但您仍然可以使用 OTel Collector 将数据发送到 Grafana Cloud。&lt;/p&gt;&lt;h2 id="got-a-question-about-grafana-alloy"&gt;对 Grafana 合金有疑问吗？&lt;/h2&gt;&lt;p&gt;我们欢迎来自社区的更多反馈！如果您对 Grafana Alloy 有疑问或反馈，请在&lt;a href="https://slack.grafana.com/" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs Community Slack&lt;/a&gt;的 #alloy 频道中找到该团队，或查看&lt;a href="https://github.com/grafana/alloy/" rel="noopener noreferrer" target="_blank"&gt;GitHub 中的 Grafana Alloy&lt;/a&gt; 。&lt;/p&gt;&lt;p&gt; &lt;em&gt;&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;现在免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 00:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/grafana-agent-to-grafana-alloy-opentelemetry-collector-faq/</guid></item><item><title>引入具有内置 Prometheus 管道的 OpenTelemetry Collector 发行版：Grafana Alloy</title><link>https://grafana.com/blog/2024/04/09/grafana-alloy-opentelemetry-collector-with-prometheus-pipelines/</link><description>&lt;p&gt;在 GrafanaCON 2024 的开幕主题演讲中，我们宣布了最新的 OSS 项目： &lt;a href="https://grafana.com/oss/alloy-opentelemetry-collector/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Alloy&lt;/a&gt; ，这是我们的 OpenTelemetry Collector 开源发行版。 Alloy 是一种遥测收集器，100% OTLP 兼容，并为 OpenTelemetry 和 Prometheus 遥测格式提供本机管道，支持指标、日志、跟踪和配置文件。&lt;/p&gt;&lt;p&gt;你们中有些人可能会想：等等，&lt;em&gt;另一个&lt;/em&gt;收藏家？&lt;/p&gt;&lt;p&gt;听我们说：Alloy 在不断增长的收集器生态系统中脱颖而出的原因在于，它是一个开源工具，结合了所有可观测信号，这些信号对于大规模运行组合基础设施和应用程序监控工作负载至关重要。&lt;/p&gt;&lt;p&gt;我们在与 Grafana Agent 合作的基础上构建了 Alloy，同时还结合了我们多年来见过的一些最困难的用例中吸取的经验教训。因此，Alloy（已准备好投入生产并将作为 v1.0 发布）与最流行的开源遥测信号广泛兼容。此外，它还包括企业级功能 - 例如用于大规模生产的本机集群和用于增强安全性的内置 Vault 支持 - 所有这些都是开箱即用的。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;总体而言，Alloy 是 Grafana 实验室“大帐篷”理念的延伸，其中来自不同软件提供商、不同行业、针对不同用例构建的不同数据源可以汇集在一个可组合的可观察性平台中。我们认为，组织应该拥有自己的可观察性策略，选择自己的工具，并可以自由地将所有数据整合到一个视图中。 Grafana Alloy 可以帮助您实现这一目标，作为遥测收集器，它与一系列不同的信号兼容，可以满足各种不同的需求。&lt;/p&gt;&lt;p&gt;让我们更深入地了解 Grafana Alloy 提供的功能，以及您可以从我们最新的 OSS 项目中期待的持续创新。&lt;/p&gt;&lt;blockquote&gt;&lt;h2 id="from-agent-to-alloy"&gt;从代理到合金&lt;/h2&gt;&lt;p&gt;Grafana Agent、我们现有的 OSS 遥测代理和 Grafana Agent Operator 现已弃用，并将从今天（2024 年 4 月 9 日）开始进入长期支持 (LTS)。这意味着 Grafana Agent 和 Grafana Agent Operator 将不再收到任何新功能更新，但它们将收到关键错误修复和安全修复。商业支持将在 LTS 阶段结束后结束，我们预计该阶段将持续约 18 个月&lt;strong&gt;，直至 2025 年 10 月 31 日&lt;/strong&gt;。 LTS 结束后，Grafana Agent 和 Grafana Agent Operator 的生命周期终止 (EOL) 阶段将开始。 Grafana Agent 和 Grafana Agent Operator 预计将于&lt;strong&gt;2025 年 11 月 1 日&lt;/strong&gt;达到 EOL。&lt;/p&gt;&lt;p&gt;我们建议您开始计划向新的 Grafana Alloy 收集器的过渡。要了解更多信息，请查看我们的&lt;a href="https://grafana.com/blog/2024/04/09/grafana-agent-to-grafana-alloy-opentelemetry-collector-faq/"&gt;合金代理常见问题博文&lt;/a&gt;。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id="opentelemetry-and-prometheus-telemetry-with-alloy"&gt; OpenTelemetry 和 Prometheus 遥测合金&lt;/h2&gt;&lt;p&gt;根据 Grafana Labs 的&lt;a href="https://grafana.com/observability-survey/?pg=blog&amp;amp;plcmt=body-txt"&gt;2024 年可观测性调查&lt;/a&gt;，绝大多数受访者表示他们正在投资 Prometheus (89%) 或 OpenTelemetry (85%)。近 40% 的受访者在生产中同时使用这两个项目，并且超过 50% 的受访者在过去一年中增加了对这两个项目的使用。&lt;/p&gt;&lt;p&gt;这是有道理的。 Prometheus 仍然是核心基础设施监控用例最成熟的生态系统，拥有超过 10,000 个导出器和开源社区在过去十年中建立的集成。然后是 OpenTelemetry，它在过去一年中无处不在，特别是当该&lt;a href="https://www.youtube.com/watch?v=OEGgmTNfYsU&amp;amp;t=295s" rel="noopener noreferrer" target="_blank"&gt;项目去年 11 月在 KubeCon 上进行 GA&lt;/a&gt;时，以及最近添加了&lt;a href="https://www.cncf.io/blog/2024/03/19/opentelemetry-announces-support-for-profiling/" rel="noopener noreferrer" target="_blank"&gt;作为 OpenTelemetry 信号的分析功能&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;我们相信，操作最健全的可观测系统看起来像是这两种领先开源技术的融合。 Alloy 与 OpenTelemetry Collector 和 Prometheus Agent 兼容，这意味着它可以用作这两种解决方案的替代方案，也可以组合成多个收集器和代理的混合系统。 Alloy 还可以本机接受现有的普通 OpenTelemetry Collector 和 Prometheus Agent 配置文件，或自动将它们转换为 Alloy 配置语法以用于高级用例。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/grafana-alloy-launch/grafana-alloy-architecture-diagram-2.png"&gt;&lt;img alt="Grafana Alloy 的架构图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana Alloy 的架构图" src="https://grafana.com/media/blog/grafana-alloy-launch/grafana-alloy-architecture-diagram-2.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt; Alloy 还可以与 Grafana Cloud 或其他供应商的任何兼容后端一起使用。您可以使用可观测性解决方案配置 Alloy，以适应本地、仅云或两者的混合。它还足够灵活，可以满足不同用户（无论大小）在可观察之旅的不同阶段的需求。&lt;/p&gt;&lt;h2 id="alloy-more-than-observability-signals"&gt;合金：不仅仅是可观测信号&lt;/h2&gt;&lt;p&gt;然而，Alloy 不仅仅涉及遥测数据。我们创建 Alloy 的目的是做更多事情：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;生产就绪管道：&lt;/strong&gt; Alloy 模块可以将笨重的大型配置文件提炼为只有几行的单个模块，这使得 SRE 能够立即启动。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;GitOps 友好：&lt;/strong&gt; Alloy 引入了一个可以从任何地方提取配置的框架，例如 GitHub、Amazon S3 和 HTTP 端点。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;&lt;a href="https://grafana.com/docs/alloy/latest/concepts/clustering/?pg=blog&amp;amp;plcmt=body-txt"&gt;专为规模而构建：&lt;/a&gt;&lt;/strong&gt;通过内置的本机集群，收集器队列可以协同工作，以实现更好的工作负载分配和针对基于拉取的工作负载的高可用性。您将能够以最少的资源和运营开销创建水平可扩展的部署。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;&lt;a href="https://grafana.com/docs/alloy/latest/reference/components/remote.vault/?pg=blog&amp;amp;plcmt=body-txt"&gt;安全性&lt;/a&gt;：&lt;/strong&gt;用户可以连接到 HashiCorp Vault 服务器来检索机密，以避免在本地管理身份验证凭据和令牌。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;调试实用程序：&lt;/strong&gt; Alloy 允许用户使用可从 Alloy HTTP 服务器查看的嵌入式 UI 轻松解决配置问题。&lt;/li&gt;&lt;/ul&gt;&lt;h2 id="alloy--grafana-cloud"&gt;合金 + Grafana 云&lt;/h2&gt;&lt;p&gt;Alloy 可以在任何自我管理的用例中工作，但它也是&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;的天然伴侣。&lt;/p&gt;&lt;p&gt;通过将 Alloy 与 Grafana Cloud 配对，用户可以利用构建在最好的开源可观测性项目之上的固执己见的可观测性解决方案。 Alloy 使您可以更轻松地将所有遥测数据连接到 Grafana Cloud 来为这些解决方案提供支持：&lt;/p&gt;&lt;ol&gt;&lt;li&gt; &lt;strong&gt;Grafana Cloud Collector UI：&lt;/strong&gt; Alloy 的全新主页，可轻松管理连接的收集器并快速检查其运行状况和性能。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;应用程序可观察性：&lt;/strong&gt;我们的解决方案用于观察和监控组织应用程序的性能。在 Grafana Cloud、OpenTelemetry 语义约定和 Prometheus 数据模型的支持下， &lt;a href="https://grafana.com/products/cloud/application-observability/?pg=blog&amp;amp;plcmt=body-txt"&gt;应用程序可观测性&lt;/a&gt;使您能够检测异常、识别根本原因并更快地解决问题，从而缩短 MTTR。我们还通过直接嵌入&lt;a href="https://grafana.com/oss/beyla-ebpf/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Beyla&lt;/a&gt;来更轻松地使用 Alloy 来检测您的应用程序，Grafana Beyla 是我们基于 eBPF 的开源自动检测工具，与 OpenTelemetry 和 Prometheus 兼容。&lt;/li&gt;&lt;li&gt; &lt;strong&gt;Kubernetes 监控：&lt;/strong&gt;我们&lt;a href="https://grafana.com/solutions/kubernetes/?pg=blog&amp;amp;plcmt=body-txt"&gt;用于基础设施监控的首要解决方案&lt;/a&gt;，可以让您更轻松地分析从集群级别到单个 Pod 的 Kubernetes 环境。您可以从一个简单的 Helm 图表开始，其中包含 Alloy 的现成说明。&lt;/li&gt;&lt;li&gt;&lt;strong&gt;开箱即用的集成：&lt;/strong&gt; Grafana Cloud 维护着&lt;a href="https://grafana.com/solutions/?pg=blog&amp;amp;plcmt=body-txt"&gt;100 多个集成&lt;/a&gt;的目录，可以通过预构建的配置、仪表板和警报进行即时监控。 Alloy 用户可以混合搭配跨 OpenTelemetry 和 Prometheus 信号的自定义遥测工具，并结合 Linux、AWS、Docker 等流行服务的集成。预计这些 Grafana Cloud 解决方案将在未来几周内推出，与 Alloy 完全兼容。&lt;/li&gt;&lt;/ol&gt;&lt;h2 id="whats-next-for-grafana-alloy"&gt; Grafana 合金的下一步是什么&lt;/h2&gt;&lt;p&gt;我们还没有完成！在 v1.0 发布公告之后，我们已经计划推出下一波令人兴奋的功能。&lt;/p&gt;&lt;h3 id="improved-integration-with-helm-and-ansible"&gt;改进了与 Helm 和 Ansible 的集成&lt;/h3&gt;&lt;p&gt;Grafana Alloy 引入了一种新的配置语法，可以更轻松地构建管道。我们正在积极探索对基于 YAML 的语法的可选支持，以使 Alloy 能够更好地与 Helm 和 Ansible 等现有工具集成。预计在未来几周内会在这里看到一些消息！&lt;/p&gt;&lt;h3 id="fleet-management"&gt;车队的管理&lt;/h3&gt;&lt;p&gt;对于 Grafana Cloud 用户，期望看到一个队列管理解决方案，该解决方案可以简化所有收集器的安装和配置管理。托管解决方案可以通过 API 调用，也可以直接在 GUI 中与其交互。然后，用户将能够集中创建、更新和管理其收集器配置，而无需按单个实例手动编辑文件。&lt;/p&gt;&lt;h3 id="health-meta-monitoring"&gt;健康元监测&lt;/h3&gt;&lt;p&gt;Grafana Cloud 的当前用户可能已经熟悉&lt;a href="https://grafana.com/docs/grafana-cloud/monitor-infrastructure/integrations/integration-reference/integration-grafana-agent/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Agent 运行状况集成&lt;/a&gt;，这使得您可以轻松监控许多连接代理的运行状况和性能。我们在 Grafana Cloud 中为 Alloy 带来了相同的开箱即用体验，并将体验提升到不仅仅是仪表板。期待看到精心策划的体验，帮助您更好地了解收藏家的健康和状态。&lt;/p&gt;&lt;h2 id="get-started-with-grafana-alloy-today"&gt;立即开始使用 Grafana 合金&lt;/h2&gt;&lt;p&gt;我们提供一系列迁移指南和工具来帮助您轻松开始使用 Grafana Alloy。&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/reference/cli/?pg=blog&amp;amp;plcmt=body-txt"&gt;迁移工具和转换器&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href="https://grafana.com/docs/alloy/latest/tasks/migrate/?pg=blog&amp;amp;plcmt=body-txt"&gt;基于用例的迁移指南&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;一如既往，欢迎并感谢社区反馈！请在&lt;a href="https://slack.grafana.com/" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs Community Slack&lt;/a&gt;的 #alloy 频道中找到我们，或者查看&lt;a href="https://github.com/grafana/alloy/" rel="noopener noreferrer" target="_blank"&gt;GitHub 中的 Grafana Alloy&lt;/a&gt; 。&lt;/p&gt;</description><pubDate>Tue, 09 Apr 2024 00:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/09/grafana-alloy-opentelemetry-collector-with-prometheus-pipelines/</guid></item><item><title>ComplyAdvantage 如何利用 OpenTelemetry 和 Grafana Cloud 构建更灵活的可观测性策略</title><link>https://grafana.com/blog/2024/04/05/how-complyadvantage-built-a-more-flexible-observability-strategy-with-opentelemetry-and-grafana-cloud/</link><description>&lt;p&gt;在金融科技领域，公司一直在寻找欺诈者和不良行为者。 &lt;a href="https://complyadvantage.com/" rel="noopener noreferrer" target="_blank"&gt;ComplyAdvantage&lt;/a&gt;为企业提供合规和风险管理工具，它知道揭露洗钱和其他犯罪行为的关键之一是清楚地了解公司系统中发生的情况。&lt;/p&gt;&lt;p&gt;在&lt;a href="https://grafana.com/about/events/observabilitycon/2023/how-complyadvantage-overhauled-observability-with-grafana-opentelemetry/"&gt;ObservabilityCON 2023 演讲&lt;/a&gt;中，ComplyAdvantage 的首席 SRE Adam Wilson 讲述了 Grafana 如何成为其团队可观察性方法的重要组成部分。随着时间的推移，该公司从本地&lt;a href="https://grafana.com/oss/grafana?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana OSS&lt;/a&gt;迁移到&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt; ，中间又与另一家基于云的专有供应商进行了停留，这让团队成员对 Grafana 有了更深入的了解。他解释说， &lt;a href="https://grafana.com/oss/opentelemetry/?pg=blog&amp;amp;plcmt=body-txt"&gt;OpenTelemetry&lt;/a&gt;使他们可以更轻松地进行这两种切换，以便他们可以探索自己的选择并找到最佳解决方案，帮助他们充分利用指标、日志、跟踪、 &lt;a href="https://grafana.com/solutions/kubernetes/?pg=blog&amp;amp;plcmt=body-txt"&gt;Kubernetes 监控&lt;/a&gt;等。&lt;/p&gt;&lt;h2 id="observability-background"&gt;可观测性背景&lt;/h2&gt;&lt;p&gt;ComplyAdvantage 每天处理 60 亿个跨度，不包括那些流经&lt;a href="https://istio.io/" rel="noopener noreferrer" target="_blank"&gt;Istio 的跨度，&lt;/a&gt; Istio 是一个开源服务网格，可帮助在任何地方运行分布式、基于微服务的应用程序。该公司拥有约 41 个 Kubernetes 集群和近 2000 个节点，其约 20% 的指标系列位于 OpenTelemetry，其余则位于&lt;a href="https://grafana.com/oss/prometheus/?pg=blog&amp;amp;plcmt=body-txt"&gt;Prometheus&lt;/a&gt; 。&lt;/p&gt;&lt;p&gt;该公司从 Grafana OSS 开始，当 Wilson 第一次加入时，还没有联盟，所以他们的可观察性堆栈中的所有内容都部署到每个集群中。因此，弄清楚两个不同集群之间发生的情况是一个复杂的过程。&lt;/p&gt;&lt;p&gt;他说，他觉得该公司拥有“一个伟大的开源可观察性堆栈的组成部分”，但它并不统一，也不能满足他团队的需求，特别是当他们面临事件时。 “归根结底，我们有太多的人对我们的生产集群有太多的访问权限，”他说。 “对于专注于合规性和数据安全的金融科技来说，这种情况是站不住脚的。”&lt;/p&gt;&lt;p&gt;还有另一个问题：由于当时围绕可观察性的文化，人们希望永远保留他们的日志，并且也希望有越来越多的指标。 Wilson 说，这导致 ComplyAdvantage 的 Prometheus 服务器“不断崩溃”。 “基本上，每天我都会有一位 SRE 不在，因为他们整晚都在努力让 Prometheus 服务器保持正常运行。”&lt;/p&gt;&lt;h2 id="searching-for-a-solution"&gt;寻找解决方案&lt;/h2&gt;&lt;p&gt;为了尝试解决这个问题，Wilson 求助于 OpenTelemetry。他说，它特别有吸引力，因为它是开源的并且与供应商无关。他说，他还发现 OpenTelemetry 具有很大的价值，因为它具有嵌入式仪器。 “您只需几行代码即可开始，并从中获得最大收益。他补充说，一旦组织中的人们开始使用它，“他们就会想从中获得更多，因为他们开始意识到它的力量。”&lt;/p&gt;&lt;p&gt; Wilson 强调了 OpenTelemetry 生态系统的两个部分，它们在 ComplyAdvantage 的可观测性策略中发挥了作用：OpenTelemetry Collector，一个 Go 二进制文件，可以吸收许多不同的可观测性数据类型（他将其用于 OpenCensus 和 OpenTelemetry）；以及与之配合使用的可视化工具 OTelBin。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-traces-metrics.png"&gt;&lt;img alt="显示 OpenTelemetry Collector 中的跟踪和指标的屏幕截图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示 OpenTelemetry Collector 中的跟踪和指标的屏幕截图" src="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-traces-metrics.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;为了提供背景信息，Wilson 随后分享了 Grafana Cloud 的屏幕截图，解释了分布式跟踪在后端的样子。 （对于不熟悉跟踪的人，他指出整个图片是一条迹线，顶线下方的位是跨度。）&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-distributed-tracing-backend.png"&gt;&lt;img alt="来自 Grafana Cloud 后端的屏幕截图，其中不同颜色的线条可视化轨迹和跨度。" class="lazyload " /&gt; &lt;noscript&gt;&lt;img alt="来自 Grafana Cloud 后端的屏幕截图，其中不同颜色的线条可视化轨迹和跨度。" src="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-distributed-tracing-backend.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;他解释说，上面的例子只是涉及一个应用程序。&lt;/p&gt;&lt;p&gt; ComplyAdvantage 的 Kubernetes 集群具有 Istio 网关，请求在进入应用程序 Pod 之前会接触到这些网关，并且这些请求会在顶行中进行跟踪。在其下方，团队可以以不同的颜色可视化 Istio 代理，它作为应用程序在同一 pod 内的 sidecar 运行。再往下是应用程序内发生的应用程序操作。 “它们都与 ID 绑定在一起，所有这些都只是通过 OpenTelemetry 架构设置的请求标头驱动，”他解释道。&lt;/p&gt;&lt;p&gt; ComplyAdvantage 使用多个自定义资源定义 (CRD) 运行&lt;a href="https://opentelemetry.io/docs/kubernetes/operator/" rel="noopener noreferrer" target="_blank"&gt;OpenTelemetry Operator&lt;/a&gt; 。他们有一个专门的可观察性团队来控制 Operator 的部署以及相关 sidecar 中的配置。 “Operator 实际上要做的是将 OpenTelemetry Collector 二进制文件注入到应用程序本身旁边的应用程序 pod 中，”Wilson 解释道。他说，“真正酷”的是，无论他们在哪里拥有 OpenTelemetry，他们都可以使用完全相同的 Go 二进制文件，但配置略有不同。 “你可以将一个指向另一个，你可以构建管道，将管道输送到管道中，再将管道输送到管道中。”&lt;/p&gt;&lt;p&gt;在&lt;a href="https://opentelemetry.io/docs/collector/deployment/gateway/" rel="noopener noreferrer" target="_blank"&gt;OpenTelemetry 网关&lt;/a&gt;中，团队将最终控制落实到位，并确保他们使用正确的环境对其进行标记。为了让支持团队保持简单，并方便整个公司的沟通，他们在 UI 下拉列表中仅创建了三个环境。&lt;/p&gt;&lt;p&gt;虽然 OpenTelemetry 处理跟踪、指标和日志，但 Wilson 指出，它特别对待跟踪，“就像可观察性中的一等公民一样”。在运输日志方面，威尔逊表示，他的公司选择了专有的可观测性供应商，而不是使用 OpenTelemetry。&lt;/p&gt;&lt;h2 id="migrating-to-grafana-cloud"&gt;迁移到 Grafana 云&lt;/h2&gt;&lt;p&gt;在讨论了他的采样经验后，Wilson 继续讨论 ComplyAdvantage 向 Grafana Cloud 的过渡。当 ComplyAdvantage 团队觉得他们的文化与他们选择的专有可观测性供应商不相符时（“这很像我们在谈论不同的语言，”Wilson 说），他们开始再次为他们的产品寻找新的供应商。可观察性后端。&lt;/p&gt;&lt;p&gt;在与 Grafana Labs 讨论后，他表示重返 Grafana “绝对有意义”。 Grafana 拥有开源背景这一事实很吸引人，双方的技术团队都进行了发言，“一切都变得非常非常好，”他说。&lt;/p&gt;&lt;p&gt; Wilson 解释说，ComplyAdvantage 迁移到 Grafana Cloud 的时间也比第一次迁移要短得多，因为他们使用的是 OpenTelemetry。鉴于 Grafana Cloud 与 OpenTelemetry 的本机集成，他们不需要再次重新实现 SDK。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-architecture.png"&gt;&lt;img alt="ComplyAdvantage 的可观察性基础架构架构图，显示了流入 Grafana 的应用程序、OTel 网关和节点。" class="lazyload " /&gt; &lt;noscript&gt;&lt;img alt="ComplyAdvantage 的可观察性基础架构架构图，显示了流入 Grafana 的应用程序、OTel 网关和节点。" src="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-architecture.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;在 ComplyAdvantage 的新可观测性基础设施中，来自应用程序的监控数据进入网关，网关现在使用跨度指标。流经第一层 OpenTelemetry 网关的每个跟踪都会提取其元数据和指标，然后直接发送到 Grafana Cloud。&lt;/p&gt;&lt;p&gt; “然后，第一层 OpenTelemetry 网关使用负载平衡导出器将同一跟踪的所有跨度发送到第二层 OpenTelemetry 网关，我们在其中做出采样决策，”Wilson 解释道。这两者都作为 Kubernetes 部署运行，因此他说，目前，他们基本上是使用请求标头将状态侵入到其可观察性基础设施中。&lt;/p&gt;&lt;p&gt; “我们已经将之前使用专有代理的方式换成了&lt;a href="https://grafana.com/docs/agent/latest/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Agent&lt;/a&gt; ，”他解释道。 “它为我们处理日志，实际上，我们已将以代理模式运行的 Prometheus 添加回我们的集群中，以专门处理 Prometheus 端点的指标。”&lt;/p&gt;&lt;p&gt; RabbitMQ 在他们的一些节点中运行，他们可以抓取 RabbitMQ 指标并将其与其他所有内容一起发送到 Grafana Cloud。&lt;/p&gt;&lt;h2 id="big-payoff"&gt;巨大的回报&lt;/h2&gt;&lt;p&gt;迁移到 Grafana Cloud 完成后，公司员工的工作方式发生了变化。 “我认为对我们来说最重要的是人们开始用数据讲述故事的方式发生了变化，”威尔逊解释道。&lt;/p&gt;&lt;p&gt;例如，他们会使用痕迹（左下）来构建饼图（右下），“在整个组织中开启前所未有的对话，”他说。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-data-stories-cropped.png"&gt;&lt;img alt="ComplyAdvantage 如何在 Grafana 中可视化数据的两个示例：跟踪条形图和显示搜索计数的饼图。" class="lazyload " /&gt; &lt;noscript&gt;&lt;img alt="ComplyAdvantage 如何在 Grafana 中可视化数据的两个示例：跟踪条形图和显示搜索计数的饼图。" src="https://grafana.com/media/blog/complyadvantage/screenshot-complyadvantage-data-stories-cropped.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;此前，当 ComplyAdvantage 的首席执行官想知道系统中运行了多少次搜索时，需要查找不同的位置并将数字拼凑在一起才能找到答案。然而，有了痕迹，人们只需查看仪表板即可得到答案。&lt;/p&gt;&lt;p&gt;更重要的是，首席执行官可以使用饼图中的基础设施数据信息来帮助与客户和合作伙伴就他们如何使用 ComplyAdvantage 进行对话。&lt;/p&gt;&lt;p&gt; “仅仅通过将一些请求标头放入我们的应用程序中，就能够对产品、销售和业务方面产生这种影响，这确实是革命性的，”威尔逊说。&lt;/p&gt;&lt;p&gt;他指出，在 OpenTelemetry 和供应商中立性方面需要牢记一件事：“该技术可能与多个供应商合作，但你可以吗？”他说，如果你喜欢某个特定供应商的“魔力”，并且你越来越依赖他们的特定功能，那么就没有理由再担心不再与供应商保持中立了。 “你可以迁移，”他向 ObsCON 观众保证。&lt;/p&gt;&lt;h2 id="looking-ahead"&gt;展望未来&lt;/h2&gt;&lt;p&gt;迁移到 Grafana Cloud 后，ComplyAdvantage 成为&lt;a href="https://grafana.com/products/cloud/slo/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana SLO&lt;/a&gt;的早期采用者，Grafana SLO 是 Grafana Cloud 中的解决方案，可以轻松创建、管理和扩展服务级别目标、SLO 仪表板和错误预算警报。 “作为我们与 Grafana Labs 关系的一部分，我们实际上能够为他们正在开发的新项目和产品提供反馈，这非常酷，”他说。&lt;/p&gt;&lt;p&gt;威尔逊表示，该公司也很高兴与一家文化与他的组织相匹配的可观察性供应商合作。 “很高兴看到我们现在处于一个非常高兴的阶段，我们能够以更多的合作伙伴关系进行合作。”&lt;/p&gt;&lt;p&gt; &lt;em&gt;&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;现在免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p&gt;</description><pubDate>Fri, 05 Apr 2024 16:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/05/how-complyadvantage-built-a-more-flexible-observability-strategy-with-opentelemetry-and-grafana-cloud/</guid></item><item><title>旧版警报删除：有关升级到 Grafana 警报您需要了解的信息</title><link>https://grafana.com/blog/2024/04/04/legacy-alerting-removal-what-you-need-to-know-about-upgrading-to-grafana-alerting/</link><description>&lt;p&gt;两年前，当我们推出 Grafana 9 时，我们&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/migrating-alerts/legacy-alerting-deprecation/?pg=blog&amp;amp;plcmt=body-txt"&gt;宣布弃用旧版警报&lt;/a&gt;，并推出 Grafana Alerting，这是 Grafana 所有版本中的新默认警报系统。&lt;/p&gt;&lt;p&gt;从那时起，我们投资了 Grafana Alerting，让您可以更轻松地&lt;a href="https://grafana.com/blog/2023/03/06/grafana-alerting-12-ways-we-made-creating-and-managing-alerts-easier-than-ever/"&gt;创建和管理警报&lt;/a&gt;。在此过程中，我们还努力尽可能无缝地从旧版警报过渡到 Grafana 警报，为我们从 Grafana 中完全删除旧版警报做好准备。&lt;/p&gt;&lt;p&gt;这个时刻即将到来：&lt;strong&gt;随着 Grafana 11 即将发布（将于 5 月 14 日正式发布），我们将正式从 Grafana 代码库中完全删除旧版警报&lt;/strong&gt;。因此，无论您是一直在推迟还是太忙于其他项目，现在都是&lt;a href="https://grafana.com/docs/grafana/v10.4/alerting/set-up/migrating-alerts/?pg=blog&amp;amp;plcmt=body-txt"&gt;升级&lt;/a&gt;到 Grafana Alerting 以避免可观测系统中断的时候了。&lt;/p&gt;&lt;p&gt;在这篇博文中，我们将引导您了解为什么应该进行转换（如果您还没有这样做的话）。我们还将提供您所需的资源，让您在不中断警报系统的情况下自信地采取行动。&lt;/p&gt;&lt;h2 id="who-does-this-impact"&gt;这对谁有影响？&lt;/h2&gt;&lt;p&gt;删除旧警报会影响 Grafana OSS 和 Grafana Enterprise 用户的子集（Grafana Cloud 帐户已升级到 Grafana Alerting）。您可以根据当前的 Grafana 版本和配置来验证您的安装正在使用的警报引擎：&lt;/p&gt;&lt;ul&gt;&lt;li&gt; Grafana 7 及更低版本均使用旧版警报。&lt;/li&gt;&lt;li&gt; Grafana 8 有一个可选的管理员选择使用 Grafana 警报。&lt;/li&gt;&lt;li&gt;新安装的 Grafana 9 和 Grafana 10 默认使用 Grafana 警报引擎，除非您明确选择退出，否则不需要任何操作。&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;但真正的问题是：如果我在安装 Grafana 11 之前&lt;em&gt;不&lt;/em&gt;从旧版警报升级到 Grafana 警报，会发生什么情况？&lt;/p&gt;&lt;p&gt;答案是：没什么好处。在升级旧警报&lt;em&gt;之前&lt;/em&gt;升级到 Grafana 11 将导致丢失所有警报，并且您将以空白警报板启动 Grafana 11。&lt;/p&gt;&lt;h2 id="how-to-upgrade-to-grafana-alerting"&gt;如何升级到 Grafana 警报&lt;/h2&gt;&lt;p&gt;您的警报是可观察性堆栈的眼睛和耳朵，因此我们了解一些用户不愿意接触它们 - 特别是当您正在处理数千个警报并且不确定谁拥有什么时。其他潜在的障碍包括重新培训团队、重建 CI/CD 管道、更新配置流程以及适应新的 API——所有这些都需要时间，而对于大多数组织来说，这些时间是稀缺的。&lt;/p&gt;&lt;p&gt;为了解决这些问题，我们在 Grafana 10.4 中构建了一个&lt;a href="https://grafana.com/docs/grafana/v10.4/alerting/set-up/migrating-alerts/?pg=blog&amp;amp;plcmt=body-txt#upgrade-with-preview-recommended"&gt;升级预览工具&lt;/a&gt;，允许您在切换到 Grafana Alerting 之前在安全且受控的预览环境中查看、编辑和删除升级的规则。如果您要从旧版本的 Grafana 升级，我们强烈建议您&lt;strong&gt;首先升级到 Grafana 10.4&lt;/strong&gt; ，并利用预览工具更轻松地导航该过程。&lt;/p&gt;&lt;p&gt; &lt;em&gt;（注意： &lt;a href="https://grafana.com/blog/2024/03/06/grafana-10.4-release-all-the-latest-features/"&gt;Grafana 10.4&lt;/a&gt;是提供旧版警报的最后一个版本，也是提供自动警报升级的 Grafana 的最后一个版本。）&lt;/em&gt;&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alert-upgrade-preview-tool.gif"&gt;&lt;img alt="Grafana 10.4 中的 Alert 升级预览工具的 Gif" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 10.4 中的 Alert 升级预览工具的 Gif" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alert-upgrade-preview-tool.gif" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;要使用预览工具，请按照下列步骤操作：&lt;/p&gt;&lt;ol&gt;&lt;li&gt;转至导航面板&lt;strong&gt;警报（旧版）&lt;/strong&gt;部分中的&lt;strong&gt;警报升级&lt;/strong&gt;页面。从那里您可以将现有的警报规则和通知渠道升级到 Grafana 警报系统。您还可以查看汇总表以了解更改的概要。&lt;/li&gt;&lt;li&gt;检查升级预览以识别并解决任何错误。新规则或通知 - 以及任何未自动升级的 - 将突​​出显示。&lt;/li&gt;&lt;li&gt;如果您使用配置方法来管理警报规则和通知渠道，您可以导出升级版本以生成与 Grafana Alerting 兼容的配置文件。在完成该过程之前，请确保您的代码设置与新系统保持一致。&lt;/li&gt;&lt;li&gt;一旦您对升级预览的状态充满信心，您就可以启用 Grafana 警报。已完成升级的 Grafana 组织将能够继续其配置的设置，而尚未完成升级的 Grafana 组织将在重新启动期间进行传统的自动升级。&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;可以&lt;a href="https://grafana.com/docs/grafana/v10.4/alerting/set-up/migrating-alerts/?pg=blog&amp;amp;plcmt=body-txt"&gt;在此处&lt;/a&gt;找到更多信息和升级旧警报的替代方法。&lt;/p&gt;&lt;h2 id="the-latest-in-grafana-alerting"&gt; Grafana 警报的最新信息&lt;/h2&gt;&lt;p&gt;借助 Grafana Alerting，我们将警报与仪表板分离，使您的警报系统更加强大和可扩展。它首次在 Grafana 8 测试版中引入，以&lt;a href="https://grafana.com/blog/2021/06/14/the-new-unified-alerting-system-for-grafana-everything-you-need-to-know/"&gt;统一 Grafana OSS、Grafana Cloud 和 Grafana Enterprise 之间的警报体验&lt;/a&gt;。它解决了 Grafana 社区中 &lt;a href="https://github.com/grafana/grafana/issues/6557" rel="noopener noreferrer" target="_blank"&gt;投票&lt;/a&gt; &lt;a href="https://github.com/grafana/grafana/issues/6593" rel="noopener noreferrer" target="_blank"&gt;最多&lt;/a&gt; &lt;a href="https://github.com/grafana/grafana/issues/6041" rel="noopener noreferrer" target="_blank"&gt;的&lt;/a&gt; &lt;a href="https://github.com/grafana/grafana/issues/7832" rel="noopener noreferrer" target="_blank"&gt;一些&lt;/a&gt; &lt;a href="https://github.com/grafana/grafana/issues/6592" rel="noopener noreferrer" target="_blank"&gt;问题&lt;/a&gt; &lt;a href="https://github.com/grafana/grafana/issues/6983" rel="noopener noreferrer" target="_blank"&gt;，&lt;/a&gt;并正式成为&lt;a href="https://grafana.com/blog/2022/06/14/grafana-alerting-explore-our-latest-updates-in-grafana-9/"&gt;Grafana 9&lt;/a&gt;中的默认设置。&lt;/p&gt;&lt;p&gt;从那时起，我们听取了社区的反馈，并通过提高生活质量和创新功能完善了警报系统。以下是 Grafana Alerting 的优势以及我们多年来推出的一些功能的简要概述：&lt;/p&gt;&lt;h3 id="single-pane-of-glass"&gt;单片玻璃&lt;/h3&gt;&lt;p&gt;在一个集中式系统中轻松管理所有警报，降低复杂性并简化操作。借助 Grafana Alerting，您可以告别分散的配置并享受有凝聚力的警报体验。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-single-view.png"&gt;&lt;img alt="Grafana 警报 UI 的屏幕截图" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 警报 UI 的屏幕截图" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-single-view.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="prometheus-integration"&gt;普罗米修斯集成&lt;/h3&gt;&lt;p&gt;利用外部 Prometheus 支持在现有的基于 Prometheus 的环境中进行无缝监控和警报，从而最大限度地提高互操作性和效率。 Grafana 与 Prometheus Ruler 和 AlertManager 的深度集成使您能够利用这两个平台的全部功能。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/prometheus-integration-alerting.png"&gt;&lt;img alt="显示 Prometheus 集成的 Grafana 警报 UI" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示 Prometheus 集成的 Grafana 警报 UI" src="https://grafana.com/media/blog/legacy-alerting-deprecation/prometheus-integration-alerting.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="powerful-alerting-rules"&gt;强大的报警规则&lt;/h3&gt;&lt;p&gt;您可以使用&lt;a href="https://grafana.com/docs/grafana/latest/alerting/alerting-rules/create-grafana-managed-rule/?pg=blog&amp;amp;plcmt=body-txt"&gt;高级规则和表达式&lt;/a&gt;从各种底层数据源创建复杂的警报条件，并通过多维规则减少警报规则传播。这意味着需要管理和审查的警报更少，噪音更少，API 和 UI 响应更灵敏，所有这些都可以让您的团队腾出时间专注于其他项目和职责。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-rules-ui.png"&gt;&lt;img alt="Grafana 警报 UI 显示警报规则设置" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 警报 UI 显示警报规则设置" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-rules-ui.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="flexible-notification-management"&gt;灵活的通知管理&lt;/h3&gt;&lt;p&gt;根据标签路由&lt;a href="https://grafana.com/docs/grafana/latest/alerting/alerting-rules/create-notification-policy/?pg=blog&amp;amp;plcmt=body-txt"&gt;通知并确定&lt;/a&gt;通知的优先级，从而简化更复杂的分层或共享警报的设置和维护。确保关键问题得到及时解决，同时响应人员得到灵活的基于时间的静音和预定的静音时间的支持。&lt;/p&gt;&lt;p&gt;对于更简单的用例，请使用&lt;a href="https://grafana.com/blog/2024/04/02/simplified-routing-in-grafana-alerting-easy-secure-and-powerful/"&gt;简化路由&lt;/a&gt;直接在警报上配置路由。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-notification-policies.png"&gt;&lt;img alt="显示通知策略的 Grafana 警报 UI" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示通知策略的 Grafana 警报 UI" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-notification-policies.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="dynamic-templating"&gt;动态模板&lt;/h3&gt;&lt;p&gt;使用灵活的模板&lt;a href="https://grafana.com/docs/grafana/latest/alerting/manage-notifications/template-notifications/?pg=blog&amp;amp;plcmt=body-txt"&gt;自定义警报通知&lt;/a&gt;，从而实现动态且适应性强的警报配置。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-templates.gif"&gt;&lt;img alt="Grafana Alerting 中动态模板的 Gif。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana Alerting 中动态模板的 Gif。" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-templates.gif" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="native-as-code-support"&gt;原生代码支持&lt;/h3&gt;&lt;p&gt;为开发人员提供原生支持，将&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/provision-alerting-resources/?pg=blog&amp;amp;plcmt=body-txt"&gt;警报定义为代码&lt;/a&gt;，促进自动化和版本控制。 Grafana 警报支持基于文件的配置和具有专用警报资源的 Terraform。此外，全面的&lt;a href="https://grafana.com/docs/grafana/latest/developers/http_api/alerting_provisioning/?pg=blog&amp;amp;plcmt=body-txt"&gt;配置 API&lt;/a&gt;可实现自定义自动化。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/aleting-as-code-support.png"&gt;&lt;img alt="Grafana 警报中的警报代码示例" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 警报中的警报代码示例" src="https://grafana.com/media/blog/legacy-alerting-deprecation/aleting-as-code-support.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="alert-state-history"&gt;警报状态历史记录&lt;/h3&gt;&lt;p&gt;了解警报的生命周期对于有效的事件管理和事件后分析至关重要。 Grafana Alerting 为&lt;a href="https://grafana.com/blog/2023/07/10/how-we-improved-grafanas-alert-state-history-to-provide-better-insights-into-your-alerting-data/"&gt;警报状态历史记录&lt;/a&gt;提供强大的支持，为警报如何随时间演变提供宝贵的见解。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-state-history.png"&gt;&lt;img alt="Grafana 警报中的警报状态历史记录 UI" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="Grafana 警报中的警报状态历史记录 UI" src="https://grafana.com/media/blog/legacy-alerting-deprecation/alerting-state-history.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h3 id="finer-grained-access-control"&gt;更细粒度的访问控制&lt;/h3&gt;&lt;p&gt;如果您使用的是&lt;a href="https://github.com/grafana/grafana" rel="noopener noreferrer" target="_blank"&gt;Grafana 的开源版本&lt;/a&gt;，Grafana Alerting 与用户、服务帐户和团队的内置查看器、编辑器和管理员角色完全集成。自定义文件夹权限以组织和控制对警报资源的访问。&lt;/p&gt;&lt;p&gt;作为&lt;a href="https://grafana.com/products/enterprise/grafana/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Enterprise&lt;/a&gt;或&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;用户，您可以通过&lt;a href="https://grafana.com/docs/grafana/latest/administration/roles-and-permissions/access-control/"&gt;基于角色的访问控制&lt;/a&gt;(RBAC) 进一步精确控制对警报功能和配置的访问，使您能够定义角色并分配权限。&lt;/p&gt;&lt;h3 id="high-availability-modes"&gt;高可用性模式&lt;/h3&gt;&lt;p&gt;通过&lt;a href="https://grafana.com/docs/grafana/latest/alerting/set-up/configure-high-availability/"&gt;高可用性模式&lt;/a&gt;保持警报服务的持续运行，最大限度地减少停机时间并确保可靠性。 Grafana 提供强大的冗余选项，因此您的警报系统在面对故障时仍能保持弹性。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/legacy-alerting-deprecation/high-availability-modes.png"&gt;&lt;img alt="高可用性模式在 Grafana 警报中如何工作的图表" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="高可用性模式在 Grafana 警报中如何工作的图表" src="https://grafana.com/media/blog/legacy-alerting-deprecation/high-availability-modes.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;您可能会发现旧警报中存在一些缺失或需要改进的内容，例如警报和仪表板之间更好的集成。我们正在努力增强这些集成，但也想听听您将来还希望看到哪些其他功能。您可以在&lt;a href="https://github.com/grafana/grafana" rel="noopener noreferrer" target="_blank"&gt;GitHub&lt;/a&gt; 、我们的&lt;a href="https://community.grafana.com" rel="noopener noreferrer" target="_blank"&gt;社区论坛以及&lt;/a&gt;&lt;a href="https://grafana.slack.com/archives/C043CEX9MBK" rel="noopener noreferrer" target="_blank"&gt;Grafana Labs Community Slack 中的 #alerting 中找到该团队。&lt;/a&gt;&lt;/p&gt;&lt;p&gt; &lt;em&gt;&lt;a href="https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt"&gt;Grafana Cloud&lt;/a&gt;是开始使用指标、日志、跟踪、仪表板等的最简单方法。我们为每个用例提供慷慨的永久免费套餐和计划。&lt;a href="https://grafana.com/auth/sign-up/create-user/?pg=blog&amp;amp;plcmt=body-txt"&gt;现在免费注册&lt;/a&gt;！&lt;/em&gt;&lt;/p&gt;</description><pubDate>Thu, 04 Apr 2024 00:00:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/04/legacy-alerting-removal-what-you-need-to-know-about-upgrading-to-grafana-alerting/</guid></item><item><title>Prometheus 社区如何投资 OpenTelemetry</title><link>https://grafana.com/blog/2024/04/03/how-the-prometheus-community-is-investing-in-opentelemetry/</link><description>&lt;p&gt;&lt;em&gt;Grafana Labs 的产品经理 Goutham Veeramachaneni 和 Grafana Labs 的高级软件工程师 Carrie Edwards 都是 Prometheus 开源项目的贡献者。这篇文章是他们共同撰写的，最初于 2024 年 3 月发布在&lt;a href="https://prometheus.io/blog/2024/03/14/commitment-to-opentelemetry/" rel="noopener noreferrer" target="_blank"&gt;Prometheus.io 博客&lt;/a&gt;上。&lt;/em&gt;&lt;/p&gt;&lt;p&gt; OpenTelemetry 项目是一个可观察性框架和工具包，旨在创建和管理跟踪、指标和日志等遥测数据。由于其信号之间的一致规范并承诺减少供应商锁定，它正在获得广泛采用，这是我们感到兴奋的事情。&lt;/p&gt;&lt;p&gt;在这里，我们将探讨 Prometheus 社区如何接受 OpenTelemetry 项目以及未来的发展。&lt;/p&gt;&lt;h2 id="looking-back-at-2023"&gt;回顾2023年&lt;/h2&gt;&lt;p&gt;在过去的几年里，我们与 OpenTelemetry 社区合作，确保 OpenTelemetry 和 Prometheus 相互双向支持。这导致起草了在两个系统之间进行转换的官方规范，以及允许您将 Prometheus 指标提取到 OpenTelemetry Collector 中的实现，反之亦然。&lt;/p&gt;&lt;p&gt;从那时起，我们花费了大量时间来了解&lt;a href="https://docs.google.com/document/d/1epvoO_R7JhmHYsII-GJ6Yw99Ky91dKOqOtZGqX7Bk0g/edit" rel="noopener noreferrer" target="_blank"&gt;OpenTelemetry 用户在 Prometheus 中存储指标时面临的挑战&lt;/a&gt;，并在此基础上探索&lt;a href="https://docs.google.com/document/d/1NGdKqcmDExynRXgC_u1CDtotz9IUdMrq2yyIq95hl70/edit" rel="noopener noreferrer" target="_blank"&gt;如何解决这些挑战&lt;/a&gt;。提出的一些改变需要仔细考虑，以避免违反任何一方的运营承诺，例如支持推式和拉式。在 2023 年柏林 PromCon 大会上，我们试图&lt;a href="https://www.youtube.com/watch?v=mcabOH70FqU" rel="noopener noreferrer" target="_blank"&gt;在一次演讲中&lt;/a&gt;总结我们的想法。&lt;/p&gt;&lt;p&gt;在&lt;a href="https://docs.google.com/document/d/11LC3wJcVk00l8w5P3oLQ-m3Y37iom6INAMEu2ZAGIIE/edit#bookmark=id.9kp854ea3sv4" rel="noopener noreferrer" target="_blank"&gt;柏林的开发峰会&lt;/a&gt;上，我们花了大部分时间深入讨论这些变化以及我们对 OpenTelemetry 的总体立场，广泛的共识是我们希望&lt;a href="https://docs.google.com/document/d/11LC3wJcVk00l8w5P3oLQ-m3Y37iom6INAMEu2ZAGIIE/edit#bookmark=id.196i9ij1u7fs" rel="noopener noreferrer" target="_blank"&gt;“成为 OpenTelemetry 指标的默认存储”&lt;/a&gt; ！&lt;/p&gt;&lt;p&gt;我们已经组建了一个核心开发人员小组来领导这一计划，我们将在 2024 年发布 Prometheus 3.0，并将 OTel 支持作为其更重要的功能之一。以下是 2024 年即将推出的其他内容的预览。&lt;/p&gt;&lt;h2 id="the-year-ahead"&gt;未来的一年&lt;/h2&gt;&lt;h3 id="otlp-ingestion-ga"&gt;OTLP 摄取 GA&lt;/h3&gt;&lt;p&gt;在 2023 年 9 月 6 日发布的&lt;a href="https://github.com/prometheus/prometheus/releases/tag/v2.47.0" rel="noopener noreferrer" target="_blank"&gt;Prometheus v2.47.0&lt;/a&gt;中，我们添加了对 Prometheus 中开放遥测协议 (OTLP) 摄取的实验支持。我们正在不断改进这一点，并计划添加对过时性的支持并使其成为一项稳定的功能。我们还将对乱序摄取的支持标记为稳定。这还涉及我们对本机/指数直方图的支持。&lt;/p&gt;&lt;h3 id="support-utf-8-metric-and-label-names"&gt;支持UTF-8度量和标签名称&lt;/h3&gt;&lt;p&gt;&lt;a href="https://github.com/open-telemetry/semantic-conventions/blob/main/docs/http/http-metrics.md" rel="noopener noreferrer" target="_blank"&gt;OpenTelemetry 语义约定&lt;/a&gt;推动“ &lt;code&gt;.&lt;/code&gt; ” 作为命名空间字符 - 例如， &lt;code&gt;http.server.request.duration&lt;/code&gt; 。然而，Prometheus 目前需要&lt;a href="https://prometheus.io/docs/instrumenting/writing_exporters/#naming" rel="noopener noreferrer" target="_blank"&gt;更有限的字符集&lt;/a&gt;，这意味着我们在将其引入 Prometheus 时将指标转换为&lt;code&gt;http_server_request_duration&lt;/code&gt; 。&lt;/p&gt;&lt;p&gt;这会导致不必要的不​​一致，我们正在努力通过为所有标签和指标名称添加 UTF-8 支持来消除此限制。 &lt;a href="https://github.com/prometheus/prometheus/issues/13095" rel="noopener noreferrer" target="_blank"&gt;此处&lt;/a&gt;跟踪进度。&lt;/p&gt;&lt;h3 id="native-support-for-resource-attributes"&gt;对资源属性的本机支持&lt;/h3&gt;&lt;p&gt;OpenTelemetry 区分指标属性（用于标识指标本身的标签，如&lt;code&gt;http.status_code&lt;/code&gt; ）和资源属性（用于标识指标来源的标签，如&lt;code&gt;k8s.pod.name&lt;/code&gt; ），而 Prometheus 具有更扁平的标签架构。这会导致许多可用性问题，详细信息请参见&lt;a href="https://docs.google.com/document/u/1/d/1gG-eTQ4SxmfbGwkrblnUk97fWQA93umvXHEzQn2Nv7E/edit" rel="noopener noreferrer" target="_blank"&gt;此处&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;我们正在从多个方面（查询、用户体验、存储等） &lt;a href="https://docs.google.com/document/d/1FgHxOzCQ1Rom-PjHXsgujK8x5Xx3GTiwyG__U3Gd9Tw/edit" rel="noopener noreferrer" target="_blank"&gt;探索此问题的多种解决方案&lt;/a&gt;，但我们的目标是使资源属性的过滤和分组变得非常容易。这是一项正在进行的工作，需要反馈和帮助！&lt;/p&gt;&lt;h3 id="otlp-export-in-the-ecosystem"&gt;生态系统中的 OTLP 导出&lt;/h3&gt;&lt;p&gt;&lt;a href="https://prometheus.io/docs/operating/integrations/#remote-endpoints-and-storage" rel="noopener noreferrer" target="_blank"&gt;大多数领先的可观测性项目和供应商&lt;/a&gt;已经支持 Prometheus 远程写入。然而，OTLP 正在变得越来越重要，我们希望在整个 Prometheus 生态系统中支持它。&lt;/p&gt;&lt;p&gt;我们希望向 Prometheus 服务器、SDK 和导出器添加对其的支持。这意味着任何使用 Prometheus SDK 检测的服务也将能够&lt;em&gt;推送&lt;/em&gt;OTLP，并且将为 OpenTelemetry 用户解锁丰富的 Prometheus 导出器生态系统。&lt;/p&gt;&lt;p&gt;但是，我们打算保留并开发 OpenMetrics 展示格式，作为 Prometheus 和基于拉动的用例的优化/简化格式。&lt;/p&gt;&lt;h3 id="delta-temporality"&gt; Delta时间性&lt;/h3&gt;&lt;p&gt;OpenTelemetry 项目还支持&lt;a href="https://grafana.com/blog/2023/09/26/opentelemetry-metrics-a-guide-to-delta-vs.-cumulative-temporality-trade-offs/"&gt;Delta 时间性&lt;/a&gt;，它有一些可观测性生态系统的用例。由于各种原因，我们有很多 Prometheus 用户仍在运行 statsd 并使用&lt;a href="https://github.com/prometheus/statsd_exporter" rel="noopener noreferrer" target="_blank"&gt;statsd_exporter&lt;/a&gt; 。&lt;/p&gt;&lt;p&gt;我们希望在 Prometheus 服务器中支持 OpenTelemetry 的 Delta 时间性，并正在&lt;a href="https://github.com/open-telemetry/opentelemetry-collector-contrib/issues/30479" rel="noopener noreferrer" target="_blank"&gt;努力实现这一目标&lt;/a&gt;。&lt;/p&gt;&lt;h2 id="call-for-contributions"&gt;呼吁捐款！&lt;/h2&gt;&lt;p&gt;正如您所看到的，Prometheus 即将推出许多令人兴奋的新内容！如果围绕可观察性在两个最相关的开源项目之间进行交叉工作听起来充满挑战且有趣，那么我们希望您加入！&lt;/p&gt;&lt;p&gt;今年，工作中的治理也发生了变化，这将使成为维护者的过程比以往任何时候都更容易！如果您想对 Prometheus 产生影响，现在就是开始的好时机。&lt;/p&gt;&lt;p&gt;我们的首要重点始终是尽可能公开和透明地组织上述所有工作，以便您也可以做出贡献。我们正在寻找贡献者来支持这一计划并帮助实现这些功能。查看&lt;a href="https://github.com/orgs/prometheus/projects/9" rel="noopener noreferrer" target="_blank"&gt;Prometheus 3.0 公共板&lt;/a&gt;和&lt;a href="https://github.com/prometheus/prometheus/issues?q=is%3Aopen&amp;#43;is%3Aissue&amp;#43;milestone%3A%22OTEL&amp;#43;Support%22" rel="noopener noreferrer" target="_blank"&gt;Prometheus OTel 支持里程碑&lt;/a&gt;，跟踪功能开发的进度并了解您可以&lt;a href="https://github.com/prometheus/prometheus/blob/main/CONTRIBUTING.md" rel="noopener noreferrer" target="_blank"&gt;做出贡献&lt;/a&gt;的方式。&lt;/p&gt;&lt;h2 id="conclusion"&gt;结论&lt;/h2&gt;&lt;p&gt;提出的一些更改规模较大且具有侵入性，或者涉及与 Prometheus 原始数据模型的根本背离。不过，我们计划优雅地引入这些内容，以便 Prometheus 3.0 不会有重大破坏性更改，并且大多数用户可以在不受影响的情况下升级。&lt;/p&gt;&lt;p&gt;我们很高兴开启 Prometheus 的新篇章，并希望收到您对建议的更改的反馈。&lt;/p&gt;</description><pubDate>Wed, 03 Apr 2024 09:59:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/03/how-the-prometheus-community-is-investing-in-opentelemetry/</guid></item><item><title>Grafana 警报中的简化路由：简单、安全且功能强大</title><link>https://grafana.com/blog/2024/04/02/simplified-routing-in-grafana-alerting-easy-secure-and-powerful/</link><description>&lt;p&gt;能力越大，复杂性就越大？&lt;/p&gt;&lt;p&gt;几年前，当我们推出&lt;a href="https://grafana.com/docs/grafana/latest/alerting/"&gt;Grafana Alerting&lt;/a&gt;时，它包含了强大的路由功能，团队可以使用该功能向各个联系点发送警报。不幸的是，这个功能也带来了相当大的复杂性和不熟悉的用户体验。这阻止了许多用户采用它，但我们仍然坚信它可以如何帮助用户。这就是为什么我们很高兴地告诉您一种新的&lt;strong&gt;简化路由&lt;/strong&gt;功能，该功能保留了所有功能，同时抽象了相应的复杂性。&lt;/p&gt;&lt;p&gt;在本博客中，我们将介绍我们是如何走到这一步的，并向您展示今天开始使用简化路由是多么容易。&lt;/p&gt;&lt;h2 id="notification-policies-the-power-and-the-problems"&gt;通报政策：权力与问题&lt;/h2&gt;&lt;p&gt;在我们进入新的简化路由之前，让我们首先看看幕后的内容（以及多年来一直存在的内容）。正如我们之前提到的，Grafana Alerting 引入了基于&lt;a href="https://grafana.com/docs/grafana-cloud/alerting-and-irm/alerting/fundamentals/notifications/notification-policies/"&gt;通知策略&lt;/a&gt;和标签的树形结构路由方法。您可以使用这些策略将警报路由到不同的接收者（电子邮件、Slack、Grafana OnCall 等），并且当您向通知策略添加标签时，您可以修改警报的发送位置。&lt;/p&gt;&lt;p&gt;与其他 IRM 解决方案相比，这提供了很多优势。例如，假设您想要更改发送通知的位置。使用其他工具，您必须为依赖该警报规则的每个服务器更改警报规则，这可能会增加多达数千个更改。但通过通知策略，您只需添加一个标签，Grafana Alerting 就会处理剩下的事情。&lt;/p&gt;&lt;div class="shortcode youtube"&gt;&lt;/div&gt;&lt;p&gt;我们有非常喜欢这个功能的用户（尤其是那些精通 Prometheus 的用户）。例如，如果您想为大客户提供白手套支持，您只需为该特定客户添加嵌套标签，以便当警报触发时，它会直接路由到礼宾服务或更高级别的团队。这种动态路由功能非常强大，而且也让维护变得更加容易。&lt;/p&gt;&lt;p&gt;然而，这种方法让很多用户感到困惑。他们中的许多人干脆完全绕过了它，而其他人则发现自己错误地标记了警报规则，并且不知道这些警报的去向。这显然不是我们希望看到的，因此我们决定让动态警报路由更简单、更直观。&lt;/p&gt;&lt;h2 id="why-you-should-use-simplified-routing-instead"&gt;为什么应该使用简化路由&lt;/h2&gt;&lt;p&gt;好消息是我们刚才讨论的所有能量都不会消失；它只是被抽象出来，所以你不必担心它。现在，您只需在 Grafana Alerting 中选择联系点，我们就会在后台自动生成策略。您仍然可以修改策略、静音计时、更改分组等等 - 您唯一失去的就是复杂性。&lt;/p&gt;&lt;p&gt;简化路由的另一个巨大好处是它继承了警报规则 RBAC，这使您可以增强对路由的控制。这还可以帮助您避免其他团队的某人意外删除错误的策略或添加竞争策略，然后您突然停止收到通知的情况。您可以限制团队或个人的访问权限，并且只有具有管理员身份的人员才能修改这些设置。&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;em&gt;注意：简化路由目前仅适用于 Grafana 托管警报和 Grafana Alertmanager。对于其他Alertmanagers，您可以继续使用通知策略。&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 id="how-to-use-simplified-routing"&gt;如何使用简化路由&lt;/h2&gt;&lt;p&gt;今天，所有 Grafana Cloud 用户都可以使用简化路由，并且在&lt;a href="https://grafana.com/docs/grafana/latest/whatsnew/whats-new-in-v10-4/"&gt;Grafana 10.4&lt;/a&gt;中默认启用它（尽管功能切换仍然存在，以防您想禁用它）。&lt;/p&gt;&lt;p&gt;首先，转到在新警报表单中&lt;strong&gt;配置标签和通知&lt;/strong&gt;，然后单击&lt;strong&gt;选择联系点&lt;/strong&gt;。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/simplified-routing/select-contact-point.png"&gt;&lt;img alt="显示如何选择接触点的屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示如何选择接触点的屏幕截图。" src="https://grafana.com/media/blog/simplified-routing/select-contact-point.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;接下来，从现有选项中选择联系点。您可以直接从此表单配置路由，所有通知将直接路由到该联系点。您不需要做任何其他事情。&lt;/p&gt;&lt;p&gt;如果您想添加新端点，请单击下拉菜单旁边的&lt;strong&gt;查看或创建联系点&lt;/strong&gt;链接。如果您具有适当的 RBAC 权限，您可以直接在那里创建新的联系点。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt;&lt;a class="lightbox-link" href="https://grafana.com/media/blog/simplified-routing/contact-point.png"&gt;&lt;img alt="显示如何创建新联系点的屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示如何创建新联系点的屏幕截图。" src="https://grafana.com/media/blog/simplified-routing/contact-point.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;还可以选择配置路线设置，例如静音计时、覆盖组或覆盖计时。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/simplified-routing/override-grouping.png"&gt;&lt;img alt="显示静音、分组和计时选项的屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示静音、分组和计时选项的屏幕截图。" src="https://grafana.com/media/blog/simplified-routing/override-grouping.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;h2 id="auto-generated-policies-only-visible-to-admin-users"&gt;自动生成的策略：仅对管理员用户可见&lt;/h2&gt;&lt;p&gt;在简化路由中，警报会在策略树中的新节点下自动生成特殊策略。默认情况下，这个新节点是折叠的，只有管理员才能看到它。&lt;/p&gt;&lt;p&gt;在这个新节点下，我们为每个联系点生成一个策略。如果警报规则使用与默认值不同的路由设置保存，我们会使用警报规则的路由设置的哈希值为联系点生成一个新的嵌套策略。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/simplified-routing/notification-policies.png"&gt;&lt;img alt="显示通知策略的更多选项的屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示通知策略的更多选项的屏幕截图。" src="https://grafana.com/media/blog/simplified-routing/notification-policies.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;正如您在下面看到的，有一个实例通过&lt;strong&gt;cp1&lt;/strong&gt;路由到&lt;strong&gt;紫色节点&lt;/strong&gt;，还有另一个实例已发送到&lt;strong&gt;蓝色节点&lt;/strong&gt;- 对于这个实例，我们使用哈希。&lt;/p&gt;&lt;figure class="figure-wrapper figure-wrapper__lightbox w-100p "&gt; &lt;a class="lightbox-link" href="https://grafana.com/media/blog/simplified-routing/notification-policies-2.png"&gt;&lt;img alt="显示嵌套通知策略的屏幕截图。" class="lazyload " /&gt;&lt;noscript&gt;&lt;img alt="显示嵌套通知策略的屏幕截图。" src="https://grafana.com/media/blog/simplified-routing/notification-policies-2.png" /&gt;&lt;/noscript&gt;&lt;/a&gt;&lt;/figure&gt;&lt;p&gt;同样，这仅对管理员用户显示。&lt;/p&gt;&lt;p&gt;请务必注意，所有这些自动生成的策略都是只读的。如果管理员想要更新某些内容，他们将必须转到警报规则表单并更新其中的路由字段。&lt;/p&gt;&lt;p&gt;要了解有关 Grafana Alerting 的更多信息，您可以查看我们的&lt;a href="https://grafana.com/docs/grafana/latest/alerting/"&gt;技术文档&lt;/a&gt;和其他&lt;a href="https://grafana.com/tags/alerting/"&gt;最近的博客文章&lt;/a&gt;。&lt;/p&gt;</description><pubDate>Tue, 02 Apr 2024 09:12:00 GMT</pubDate><guid isPermaLink="true">https://grafana.com/blog/2024/04/02/simplified-routing-in-grafana-alerting-easy-secure-and-powerful/</guid></item></channel></rss>